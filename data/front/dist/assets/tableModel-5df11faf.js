import{f as e,d as a,e as l,o,c as s,j as t,F as d,n,G as r,w as i,X as p,t as u,a as m,k as b,J as c,z as v,aK as g,aR as f,aH as h,Z as k,aq as w,aO as _,ab as y,aa as C,v as V,aL as F,ac as x,ad as j,E as U,ae as D,a0 as N,_ as S}from"./index-4bfb878d.js";import{U as O}from"./const-f443e30b.js";import{c as z}from"./index-6c8a85ac.js";import{g as G}from"./index-f736ac6b.js";import{q as L,d as P,u as q,a as M}from"./index-b10e131e.js";const Y=e([{type:"primary",icon:"plus",state:"add",label:"新增",disabled:!1,permissions:[]},{type:"success",icon:"edit",state:"edit",label:"修改",disabled:!0,permissions:[]},{type:"danger",icon:"delete",state:"remove",label:"批量删除",disabled:!0,permissions:[]}]),A=[{prop:"workshopCode",label:"车间编码",slot:"workshopCode"},{prop:"workshopName",label:"车间名称"},{prop:"area",label:"面积"},{prop:"charge",label:"负责人"},{prop:"enableFlag",label:"是否启用",slot:"enableFlag"},{prop:"remark",label:"备注"},{label:"操作",slot:"operate"}],E=e([{type:"input",label:"车间编码",prop:"workshopCode",placeholder:"请输入车间编码"},{type:"input",label:"车间名称",prop:"workshopName",placeholder:"请输入车间名称"},{type:"input",label:"负责人",prop:"charge",placeholder:"请输入负责人名称"}]),I={style:{"margin-bottom":"16px"}},R={class:"dialog-footer"},B=S(a({__name:"tableModel",props:{paginationData:{type:Object,default:()=>{}},tableDataList:{type:Array,default:()=>[]},tableLoading:{type:Boolean,default:!1}},emits:["handlePagination","renovateInfo"],setup(a,{emit:S}){const E=e({workshopCode:[{required:!0,message:"请输入车间编码",trigger:"blur"}],workshopName:[{required:!0,message:"请输入车间名称",trigger:"blur"}]}),B=l();let H=e([]),K=l(!1),J=l(""),T=l({workshopCode:"",autoGenFlag:!1,workshopName:"",area:1,charge:"",enableFlag:"Y",remark:"",id:""});const W=l(""),X=l(!1),Z=()=>{W.value="edit",K.value=!K.value,J.value="添加车间"},Q=async e=>{W.value="edit",J.value="修改车间",$(e)},$=e=>{const a=(null==e?void 0:e.id)||H;L(a).then((e=>{T.value=e,K.value=!0}))},ee=e=>{const a=(null==e?void 0:e.id)||H,l=Array.isArray(a)?a:[a];g.confirm("是否删除所选数据?").then((()=>{P(l).then((e=>{f.success("删除成功"),S("renovateInfo")}))}))},ae=e=>{H=e.map((e=>e.id)),Y[1].disabled=!H.length||H.length>=2,Y[2].disabled=!H.length},le=({value:e})=>{S("handlePagination",e)},oe=e=>{e&&(T.value.workshopCode="",G("WORKSHOP_CODE").then((e=>{h((()=>{T.value.workshopCode=e}))})))},se=()=>{B.value&&(B.value.resetFields(),T.value={workshopCode:"",autoGenFlag:!1,workshopName:"",area:1,charge:"",enableFlag:"Y",remark:"",id:""},K.value=!K.value,S("renovateInfo"))};return(e,l)=>{const g=k,f=w,h=_,S=y,G=C,L=V,P=F,H=x,te=j,de=U,ne=D,re=N;return o(),s(d,null,[t("div",I,[(o(!0),s(d,null,n(m(Y),((e,a)=>(o(),r(g,{type:e.type,plain:"",disabled:e.disabled,icon:e.icon,onClick:a=>(e=>{switch(e){case"add":Z();break;case"edit":Q();break;case"remove":ee()}})(e.state),key:a},{default:i((()=>[p(u(e.label),1)])),_:2},1032,["type","disabled","icon","onClick"])))),128))]),b(z,{onSelectionChange:ae,onPaginationChange:le,isSelection:!0,columns:m(A),pagination:a.paginationData,tableData:a.tableDataList,loading:a.tableLoading},{workshopCode:i((({scope:e})=>[b(g,{type:"primary",link:"",onClick:a=>(async e=>{W.value="view",J.value="查看车间",$(e)})(e.row)},{default:i((()=>[p(u(e.row.workshopCode),1)])),_:2},1032,["onClick"])])),enableFlag:i((({scope:e})=>[b(f,{type:"Y"===e.row.enableFlag?"success":"danger"},{default:i((()=>[p(u("Y"===e.row.enableFlag?"是":"否"),1)])),_:2},1032,["type"])])),operate:i((({scope:e})=>[b(g,{style:{"font-size":"17px"},type:"primary",link:"",onClick:a=>Q(e.row),size:"small"},{default:i((()=>[p("修改")])),_:2},1032,["onClick"]),b(g,{style:{"font-size":"17px"},link:"",onClick:a=>ee(e.row),size:"small",type:"danger"},{default:i((()=>[p("删除")])),_:2},1032,["onClick"])])),_:1},8,["columns","pagination","tableData","loading"]),b(re,{modelValue:m(K),"onUpdate:modelValue":l[8]||(l[8]=e=>v(K)?K.value=e:K=e),title:m(J),onBeforeClose:se,width:"35%"},{footer:i((()=>[t("span",R,["view"!==W.value?(o(),r(g,{key:0,type:"primary",onClick:l[7]||(l[7]=e=>(async e=>{e&&await e.validate(((e,a)=>{e&&(T.value.id?q(T.value).then((e=>{se()})):M(T.value).then((e=>{se()})))}))})(B.value))},{default:i((()=>[p("确定")])),_:1})):c("",!0),b(g,{onClick:se},{default:i((()=>[p("返回")])),_:1})])])),default:i((()=>[b(ne,{ref_key:"ruleFormRef",ref:B,model:m(T),"label-width":"120px",rules:E,"status-icon":""},{default:i((()=>["view"!==W.value?(o(),r(S,{key:0,label:"生成编码",prop:"autoGenFlag"},{default:i((()=>[b(h,{loading:X.value,modelValue:m(T).autoGenFlag,"onUpdate:modelValue":l[0]||(l[0]=e=>m(T).autoGenFlag=e),"active-color":"#13ce66",onChange:oe},null,8,["loading","modelValue"])])),_:1})):c("",!0),b(de,null,{default:i((()=>[b(L,{span:22},{default:i((()=>[b(S,{label:"车间编码",prop:"workshopCode"},{default:i((()=>[b(G,{modelValue:m(T).workshopCode,"onUpdate:modelValue":l[1]||(l[1]=e=>m(T).workshopCode=e),disabled:"view"==W.value},null,8,["modelValue","disabled"])])),_:1})])),_:1}),b(L,{span:22},{default:i((()=>[b(S,{label:"车间名称",prop:"workshopName"},{default:i((()=>[b(G,{modelValue:m(T).workshopName,"onUpdate:modelValue":l[2]||(l[2]=e=>m(T).workshopName=e),disabled:"view"==W.value},null,8,["modelValue","disabled"])])),_:1})])),_:1}),b(L,{span:22},{default:i((()=>[b(S,{label:"负责人",prop:"charge"},{default:i((()=>[b(G,{modelValue:m(T).charge,"onUpdate:modelValue":l[3]||(l[3]=e=>m(T).charge=e),disabled:"view"==W.value},null,8,["modelValue","disabled"])])),_:1})])),_:1}),b(L,{span:22},{default:i((()=>[b(S,{label:"面积",prop:"area"},{default:i((()=>[b(P,{modelValue:m(T).area,"onUpdate:modelValue":l[4]||(l[4]=e=>m(T).area=e),min:1,disabled:"view"==W.value},null,8,["modelValue","disabled"])])),_:1})])),_:1}),b(L,{span:22},{default:i((()=>[b(S,{label:"是否启用",prop:"enableFlag"},{default:i((()=>[b(te,{modelValue:m(T).enableFlag,"onUpdate:modelValue":l[5]||(l[5]=e=>m(T).enableFlag=e),disabled:"view"==W.value},{default:i((()=>[(o(!0),s(d,null,n(m(O),((e,a)=>(o(),r(H,{label:e.value,key:a},{default:i((()=>[p(u(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),b(L,{span:22},{default:i((()=>[b(S,{label:"备注",prop:"remark"},{default:i((()=>[b(G,{disabled:"view"==W.value,modelValue:m(T).remark,"onUpdate:modelValue":l[6]||(l[6]=e=>m(T).remark=e),rows:2,type:"textarea",placeholder:"请输入备注"},null,8,["disabled","modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/masterData/workShopSetUp/components/tableModel.vue"]]),H=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));export{H as a,E as s,B as t};
