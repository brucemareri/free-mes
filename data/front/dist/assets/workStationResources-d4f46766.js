import{d as e,e as a,aS as t,o as r,c as l,k as n,a as o,ch as i,F as s,aa as u,_ as m,w as d,X as c,I as p,G as f,t as y,ab as h,Z as g,ae as b,aI as _,f as v,g as C,j as w,v as S,E as k,a0 as P,n as D,aR as x,bN as N}from"./index-4bfb878d.js";import j from"./carouselCard-f794a439.js";import{a as M,q,b as I,c as T}from"./index-cbc4edd9.js";import{c as V}from"./index-6c8a85ac.js";import{M as F}from"./const-f443e30b.js";import{h as R}from"./tree-5260b4e2.js";const U=m(e({__name:"treeMaterial",props:{treeMaterialForm:{type:Object,default:()=>{}}},emits:["nodeClick"],setup(e,{emit:m}){const d=e,c=a();t(d.treeMaterialForm,(e=>{c.value.filter(e.classifyName)}));const p=e=>{m("nodeClick",e.id)},f=(e,a)=>!e||a.label.includes(e);return(a,t)=>{const m=u;return r(),l(s,null,[n(m,{modelValue:e.treeMaterialForm.classifyName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.treeMaterialForm.classifyName=a),placeholder:"请输入分类名称",clearable:""},null,8,["modelValue"]),n(o(i),{ref_key:"treeRef",ref:c,data:e.treeMaterialForm.treeData,props:e.treeMaterialForm.treeProps,onNodeClick:p,"filter-node-method":f},null,8,["data","props"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/components/facilityTreeChoose/treeMaterial.vue"]]),z=[{label:"设备编码",prop:"machineryCode"},{prop:"machineryName",label:"设备名称"},{prop:"machineryTypeName",label:"所属分类"},{prop:"workshopName",label:"所属车间",width:"120"},{label:"设备状态",prop:"status"},{prop:"createTime",label:"创建时间",width:"180"}],E=m(e({__name:"materialData",props:{queryParams:{type:Object,default:()=>{}},tableData:{type:Array,default:()=>Array},paginationData:{type:Object,default:()=>{}},loadingTable:{type:Boolean,default:!1},treeMaterialForm:{type:Object,default:()=>{}}},emits:["searchParams","handlePagination","handleCurrentChange","resetSearch"],setup(e,{expose:t,emit:i}){const m=e,v=a(),C=a(null),w=()=>{i("searchParams")},S=e=>{i("handlePagination",e)},k=e=>{i("handleCurrentChange",e)};return t({handleClearSelectionData:()=>{C.value&&C.value.clearCurrentRow()}}),(a,t)=>{const P=u,D=h,x=g,N=b,j=_;return r(),l(s,null,[n(N,{model:e.queryParams,inline:!0,ref_key:"ruleFormRef",ref:v,style:{"margin-bottom":"20px"}},{default:d((()=>[n(D,{label:"设备编码",prop:"machineryCode"},{default:d((()=>[n(P,{modelValue:e.queryParams.machineryCode,"onUpdate:modelValue":t[0]||(t[0]=a=>e.queryParams.machineryCode=a),placeholder:"请输入设备编码"},null,8,["modelValue"])])),_:1}),n(D,{label:"设备名称",prop:"machineryName"},{default:d((()=>[n(P,{modelValue:e.queryParams.machineryName,"onUpdate:modelValue":t[1]||(t[1]=a=>e.queryParams.machineryName=a),placeholder:"请输入设备名称"},null,8,["modelValue"])])),_:1}),n(D,null,{default:d((()=>[n(x,{type:"primary",onClick:w},{default:d((()=>[c("搜索")])),_:1}),n(x,{onClick:t[2]||(t[2]=e=>{var a;(a=v.value)&&(a.resetFields(),m.queryParams.machineryTypeId="",i("resetSearch"))})},{default:d((()=>[c("重置")])),_:1})])),_:1})])),_:1},8,["model"]),p((r(),f(V,{ref_key:"multipleTableRef",ref:C,currentRow:!0,pagination:e.paginationData,tableData:e.tableData,columns:o(z),onPaginationChange:S,onCurrentChange:k},{status:d((({scope:e})=>[c(y(o(F)[e.row.status]),1)])),_:1},8,["pagination","tableData","columns"])),[[j,e.loadingTable]])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/components/facilityTreeChoose/materialData.vue"]]),L={class:"dialog-footer"},A=m(e({__name:"index",emits:["handleCurrentSubmit"],setup(e,{expose:t,emit:l}){const i=a(null),s=a(!1);let u=a("");const m=v({classifyName:"",treeData:a([]),treeProps:{children:"children",label:"machineryTypeName"}}),p=a(!1),y=v({machineryCode:"",machineryName:"",machineryTypeId:""});let h=v([]);const b=v({total:0,pageSize:10,pageSizes:[5,10,15,20],currentPage:1}),_=()=>{z()},D=()=>{z()},x=e=>{y.machineryTypeId=e,z()},N=e=>{u.value=e},j=()=>{i.value&&(null==i||i.value.handleClearSelectionData())},I=e=>{b.currentPage=e.value.currentPage,z()},T=()=>{l("handleCurrentSubmit",u.value),F()},V=()=>{F()},F=()=>{u.value="",m.classifyName="",y.machineryCode="",y.machineryName="",j(),s.value=!s.value},z=()=>{const e={...y,pageNo:b.currentPage,pageSize:b.pageSize};p.value=!0,M(e).then((e=>{const{list:a=[],total:t}=e||{};h=a,b.total=t})).finally((()=>{p.value=!1}))},A=()=>{q().then((e=>{const a=R(e.list,"id","parentTypeId")[0];m.treeData.push(a)})),z()};return C((()=>{A()})),t({clearSelectionListData:j,visibleProduct:s}),(e,a)=>{const t=S,l=k,v=g,C=P;return r(),f(C,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),title:"设备选择",width:"70%",center:""},{footer:d((()=>[w("span",L,[n(v,{type:"primary",onClick:T,disabled:!o(u)},{default:d((()=>[c("确 定")])),_:1},8,["disabled"]),n(v,{onClick:V},{default:d((()=>[c("取 消")])),_:1})])])),default:d((()=>[n(l,{gutter:20},{default:d((()=>[n(t,{span:4,xs:20},{default:d((()=>[n(U,{"tree-material-form":m,onNodeClick:x},null,8,["tree-material-form"])])),_:1}),n(t,{span:20,xs:24},{default:d((()=>[n(E,{onSearchParams:_,onResetSearch:D,"query-params":y,"table-data":o(h),"pagination-data":b,"loading-table":p.value,onHandlePagination:I,"tree-material-form":m,onHandleCurrentChange:N,ref_key:"materialDataRef",ref:i},null,8,["query-params","table-data","pagination-data","loading-table","tree-material-form"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/components/facilityTreeChoose/index.vue"]]),H=m(e({__name:"workStationResources",props:{workId:{type:null,required:!0},isEdit:{type:null,required:!0}},setup(e){const t=e;a(),v({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}]}),v({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}]});const o=a(null),i=a(!1),u=a(""),m=v([{title:"设备资源",cardDescribe:"facility",tableFormList:[],isEdit:t.isEdit,tableColumns:[{prop:"machineryCode",label:"设备编号"},{prop:"machineryName",label:"设备名称"},{prop:"createTime",label:"时间",width:"200"},{slot:"operate",label:"操作",align:"center",fixed:"right"}],pagination:{total:0,pageSize:10,pageSizes:[5,10,15,20],currentPage:1}}]),p=a("");a({postId:""}),v([]),a({});const f=e=>{switch(p.value=e,e){case"facility":h();break;case"manpower":g();break;case"tool":b()}},y=e=>{console.log(e,"handleUpDateList"),w()},h=()=>{o.value.visibleProduct=!0},g=()=>{u.value="添加人力资源",i.value=!i.value},b=()=>{u.value="添加工装夹具资源",i.value=!i.value},_=e=>{if(null==e)return;const a={...e,machineryId:e.id,workstationId:t.workId};I(a).then((e=>{x.success("新增成功"),w()}))},w=()=>{const e={workstationId:t.workId,pageNo:m[0].pagination.currentPage,pageSize:m[0].pagination.pageSize};T(e).then((e=>{const{list:a,total:t}=e||{};m[0].pagination.total=t,m[0].tableFormList=a}))};return C((()=>{w()})),(e,a)=>{const t=N;return r(),l(s,null,[n(t,{"content-position":"center"},{default:d((()=>[c("工作站-设备资源")])),_:1}),(r(!0),l(s,null,D(m,((e,a)=>(r(),l("div",{key:a},[n(j,{"card-info":e,onHandleResourceSave:f,onUpDateList:y},null,8,["card-info"])])))),128)),n(A,{ref_key:"itemSelectRef",ref:o,onHandleCurrentSubmit:_},null,512)],64)}}}),[["__scopeId","data-v-5be9d27e"],["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/masterData/workStationManage/components/workStationResources.vue"]]);export{H as default};
