import{r as e,f as a,D as t,q as i,d as l,e as o,C as s,o as r,c as n,k as d,w as m,a as u,z as c,F as f,H as p,a0 as b,I as _,j as g,t as h,h as w,L as T,M as x,N as j,a1 as v,_ as y}from"./index-4bfb878d.js";import{u as S}from"./useVxeCrudSchemas-092b8963.js";import{u as D}from"./useXTable-309dffed.js";const I=a=>e.get({url:"/admin-api/infra/job-log/page",params:a}),Y=a=>e.download({url:"/admin-api/infra/job-log/export-excel",params:a}),{t:k}=i(),C=a({primaryKey:"id",primaryType:"id",primaryTitle:"日志编号",action:!0,columns:[{title:"任务编号",field:"jobId",isSearch:!0},{title:"处理器的名字",field:"handlerName",isSearch:!0},{title:"处理器的参数",field:"handlerParam"},{title:"第几次执行",field:"executeIndex"},{title:"开始执行时间",field:"beginTime",formatter:"formatDate",table:{slots:{default:"beginTime_default"}},search:{show:!0,itemRender:{name:"XDataPicker"}}},{title:"结束执行时间",field:"endTime",formatter:"formatDate",isTable:!1,search:{show:!0,itemRender:{name:"XDataPicker"}}},{title:"执行时长",field:"duration",table:{slots:{default:"duration_default"}}},{title:k("common.status"),field:"status",dictType:t.INFRA_JOB_LOG_STATUS,dictClass:"number",isSearch:!0}]}),{allSchemas:L}=S(C),M=l({name:"JobLog"}),H=y(l({...M,setup(a){const{t:t}=i(),[l,{exportList:y}]=D({allSchemas:L,getListApi:I,exportListApi:Y}),S=o(!1),k=o(""),C=o(),M=async a=>{const i=await(l=a.id,e.get({url:"/admin-api/infra/job-log/get?id="+l}));var l;C.value=i,k.value=t("action.detail"),S.value=!0};return(e,a)=>{const i=T,o=x,D=j,I=p,Y=v,H=b,R=s("hasPermi");return r(),n(f,null,[d(I,null,{default:m((()=>[d(D,{onRegister:u(l)},{toolbar_buttons:m((()=>[_(d(i,{type:"warning",preIcon:"ep:download",title:u(t)("action.export"),onClick:a[0]||(a[0]=e=>u(y)("定时任务详情.xls"))},null,8,["title"]),[[R,["infra:job:export"]]])])),beginTime_default:m((({row:e})=>[g("span",null,h(u(w)(e.beginTime).format("YYYY-MM-DD HH:mm:ss")+" ~ "+u(w)(e.endTime).format("YYYY-MM-DD HH:mm:ss")),1)])),duration_default:m((({row:e})=>[g("span",null,h(e.duration+" 毫秒"),1)])),actionbtns_default:m((({row:e})=>[_(d(o,{preIcon:"ep:view",title:u(t)("action.detail"),onClick:a=>M(e)},null,8,["title","onClick"]),[[R,["infra:job:query"]]])])),_:1},8,["onRegister"])])),_:1}),d(H,{modelValue:u(S),"onUpdate:modelValue":a[2]||(a[2]=e=>c(S)?S.value=e:null),title:u(k)},{footer:m((()=>[d(i,{title:u(t)("dialog.close"),onClick:a[1]||(a[1]=e=>S.value=!1)},null,8,["title"])])),default:m((()=>[d(Y,{schema:u(L).detailSchema,data:u(C)},{retryInterval:m((({row:e})=>[g("span",null,h(e.retryInterval+"毫秒"),1)])),monitorTimeout:m((({row:e})=>[g("span",null,h(e.monitorTimeout>0?e.monitorTimeout+" 毫秒":"未开启"),1)])),_:1},8,["schema","data"])])),_:1},8,["modelValue","title"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/infra/job/JobLog.vue"]]);export{H as default};
