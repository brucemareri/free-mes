import{r as a,d as e,f as s,e as o,g as t,o as l,c as n,k as i,w as d,a as r,j as c,F as u,n as m,G as p,X as g,t as w,ce as y,aK as f,aR as v,H as x,Z as k,cx as b,_ as C}from"./index-4bfb878d.js";import{c as _}from"./index-529a6cde.js";import{c as h}from"./index-6c8a85ac.js";import{s as S,b as j,t as z}from"./data-636d1bc2.js";const D={style:{"margin-bottom":"20px"}},N=C(e({__name:"index",setup(e){const C=s({workstationName:"",taskCode:"",taskName:"",workorderCode:"",processCode:"",processName:"",startTime:"",endTime:""});let N=s({total:0,pageSize:10,pageSizes:[5,10,15,20],currentPage:1});const V=o(!1);let P=s([]),U=o([]);const A=()=>{F()},B=async()=>{const e=await(async()=>await a.download({url:"/admin-api/mes/pro/task/listByConditional/export"}))();y.excel(e,"工序设置.xls")},M=a=>{U.value=a.map((a=>null==a?void 0:a.id)),j[0].disabled=!U.value.length},T=e=>{const s=e||U.value,o=Array.isArray(s)?s:[s];f.confirm("是否删除当前数据?").then((()=>{(async e=>await a.delete({url:"/admin-api/mes/pro/task/batch",data:e}))(o).then((a=>{v.success("删除成功"),F()}))}))},E=a=>{N=null==a?void 0:a.value,F()},F=()=>{const e={...C,pageNo:N.currentPage,pageSize:N.pageSize};V.value=!0,(async e=>await a.get({url:"/admin-api/mes/pro/task/listByConditional",params:e}))(e).then((a=>{const{total:e,list:s=[]}=a||{};N.total=e,P=s})).finally((()=>{V.value=!1}))};return t((()=>{F()})),(a,e)=>{const s=x,o=k,t=b;return l(),n(u,null,[i(s,null,{default:d((()=>[i(_,{"conditions-list":r(S),"search-model":C,onQueryData:A},null,8,["conditions-list","search-model"])])),_:1}),i(s,null,{default:d((()=>[c("div",D,[(l(!0),n(u,null,m(r(j),((a,e)=>(l(),p(o,{plain:"",type:a.type,key:e,icon:a.icon,disabled:a.disabled,onClick:e=>(a=>{switch(a){case"remove":T();break;case"download":B()}})(a.state)},{default:d((()=>[g(w(a.label),1)])),_:2},1032,["type","icon","disabled","onClick"])))),128))]),i(h,{loading:V.value,isSelection:!0,columns:r(z),tableData:r(P),pagination:r(N),onSelectionChange:M,onPaginationChange:E},{colorCode:d((({scope:a})=>[i(t,{modelValue:a.row.colorCode,"onUpdate:modelValue":e=>a.row.colorCode=e,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["loading","columns","tableData","pagination"])])),_:1})],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/prodMgmt/task/index.vue"]]);export{N as default};
