import{d as e,e as a,a_ as l,f as t,o as d,c as o,k as r,w as u,G as m,J as s,F as i,n as p,a as n,X as c,t as f,aH as b,aa as g,ab as _,v as F,aO as V,E as D,at as S,au as y,cg as k,ac as w,ad as h,aL as v,ae as j,A as x,B as O,_ as U}from"./index-4bfb878d.js";import{R as C,i as M}from"./ItemBom-b69b4a32.js";import{g as I}from"./index-f736ac6b.js";import"./index-6c8a85ac.js";import"./index-6ebcd94a.js";import"./treeMaterial-9b585804.js";import"./materialData-d3bde0f1.js";import"./data-6c43379c.js";import"./const-f443e30b.js";import"./pmOrder-563fbf59.js";const N=U(e({__name:"productForm",props:{measureOptions:{type:Array,default:()=>[]},productFormData:{type:Object,default:()=>{}},treeMaterialForm:{type:Object,default:()=>{}},dialogState:{type:String,default:()=>""}},setup(e,{expose:U}){const N=e,T=a({value:"id",label:"label",children:"children",checkStrictly:!0}),q=l((()=>"Y"===N.productFormData.safeStockFlag)),E=a(),G=t({itemCode:[{required:!0,message:"物料/产品编码不能为空",trigger:"blur"},{max:64,message:"物料/产品编码长度必须小于64个字符",trigger:"blur"}],itemName:[{required:!0,message:"物料/产品名称不能为空",trigger:"blur"}],unitOfMeasure:[{required:!0,message:"单位不能为空",trigger:"blur"}],itemTypeId:[{required:!0,message:"物料分类不能为空",trigger:"blur"}]});return U({handleSubmitForm:async()=>{if(null==E?void 0:E.value)return await new Promise((e=>{E.value.validate((a=>{e(a)}))}))},handleCancel:()=>{E.value&&E.value.resetFields()}}),(a,l)=>{const t=g,U=_,B=F,A=V,J=D,P=S,z=y,H=k,K=w,L=h,R=v,X=j,Y=x,Q=O;return d(),o(i,null,[r(X,{ref_key:"refProduct",ref:E,model:e.productFormData,rules:G,"label-width":"100px"},{default:u((()=>[r(J,null,{default:u((()=>[r(B,{span:8},{default:u((()=>[r(U,{label:"物料编码",prop:"itemCode"},{default:u((()=>[r(t,{modelValue:e.productFormData.itemCode,"onUpdate:modelValue":l[0]||(l[0]=a=>e.productFormData.itemCode=a),placeholder:"请输入物料编码",clearable:"",disabled:"View"===e.dialogState},null,8,["modelValue","disabled"])])),_:1})])),_:1}),r(B,{span:8},{default:u((()=>["View"!==e.dialogState?(d(),m(U,{key:0,"label-width":"80",label:"自动生成"},{default:u((()=>[r(A,{modelValue:e.productFormData.autoGenFlag,"onUpdate:modelValue":l[1]||(l[1]=a=>e.productFormData.autoGenFlag=a),"active-color":"#13ce66",onChange:l[2]||(l[2]=a=>(e=>{if(!e)return;N.productFormData.itemCode="",I("ITEM_CODE").then((e=>{b((()=>{N.productFormData.itemCode=e}))}))})(e.productFormData.autoGenFlag))},null,8,["modelValue"])])),_:1})):s("",!0)])),_:1}),r(B,{span:8},{default:u((()=>[r(U,{label:"物料名称",prop:"itemName"},{default:u((()=>[r(t,{modelValue:e.productFormData.itemName,"onUpdate:modelValue":l[3]||(l[3]=a=>e.productFormData.itemName=a),placeholder:"请输入物料名称",disabled:"View"===e.dialogState},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),r(J,null,{default:u((()=>[r(B,{span:8},{default:u((()=>[r(U,{label:"规格型号",prop:"specification"},{default:u((()=>[r(t,{modelValue:e.productFormData.specification,"onUpdate:modelValue":l[4]||(l[4]=a=>e.productFormData.specification=a),type:"textarea",autosize:"",maxlength:"500",disabled:"View"===e.dialogState,placeholder:"请输入规格型号"},null,8,["modelValue","disabled"])])),_:1})])),_:1}),r(B,{span:8},{default:u((()=>[r(U,{label:"产品单位",prop:"unitOfMeasure"},{default:u((()=>[r(z,{modelValue:e.productFormData.unitOfMeasure,"onUpdate:modelValue":l[5]||(l[5]=a=>e.productFormData.unitOfMeasure=a),disabled:"View"===e.dialogState},{default:u((()=>[(d(!0),o(i,null,p(e.measureOptions,(e=>(d(),m(P,{key:e.measureCode,label:e.measureName,value:e.measureCode},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),r(B,{span:8},{default:u((()=>[r(U,{label:"产品分类",prop:"itemTypeId"},{default:u((()=>[r(H,{options:e.treeMaterialForm.treeData,"show-all-levels":!1,props:T.value,modelValue:e.productFormData.itemTypeId,"onUpdate:modelValue":l[6]||(l[6]=a=>e.productFormData.itemTypeId=a)},null,8,["options","props","modelValue"])])),_:1})])),_:1})])),_:1}),r(J),r(J,null,{default:u((()=>[r(B,{span:8},{default:u((()=>[r(U,{label:"是否启用"},{default:u((()=>[r(L,{modelValue:e.productFormData.enableFlag,"onUpdate:modelValue":l[7]||(l[7]=a=>e.productFormData.enableFlag=a),disabled:"View"===e.dialogState},{default:u((()=>[(d(!0),o(i,null,p(n(C),(e=>(d(),m(K,{key:e.key,label:e.key},{default:u((()=>[c(f(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),r(B,{span:8},{default:u((()=>[r(U,{label:"启用安全库存"},{default:u((()=>[r(L,{modelValue:e.productFormData.safeStockFlag,"onUpdate:modelValue":l[8]||(l[8]=a=>e.productFormData.safeStockFlag=a),disabled:"View"===e.dialogState},{default:u((()=>[(d(!0),o(i,null,p(n(C),(e=>(d(),m(K,{key:e.key,label:e.key},{default:u((()=>[c(f(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),r(B,{span:8},{default:u((()=>[r(U,{label:"备注"},{default:u((()=>[r(t,{disabled:"View"===e.dialogState,modelValue:e.productFormData.remark,"onUpdate:modelValue":l[9]||(l[9]=a=>e.productFormData.remark=a),placeholder:"请输入内容"},null,8,["disabled","modelValue"])])),_:1})])),_:1})])),_:1}),n(q)?(d(),m(J,{key:0},{default:u((()=>[r(B,{span:8},{default:u((()=>[r(U,{label:"最小库存量"},{default:u((()=>[r(R,{disabled:"View"===e.dialogState,modelValue:e.productFormData.minStock,"onUpdate:modelValue":l[10]||(l[10]=a=>e.productFormData.minStock=a),percision:2,step:1,min:1,placeholder:"请输入最小安全库存量"},null,8,["disabled","modelValue"])])),_:1})])),_:1}),r(B,{span:8},{default:u((()=>[r(U,{label:"最大库存量"},{default:u((()=>[r(R,{disabled:"View"===e.dialogState,modelValue:e.productFormData.maxStock,"onUpdate:modelValue":l[11]||(l[11]=a=>e.productFormData.maxStock=a),percision:2,min:1,step:1,placeholder:"请输入最大安全库存量"},null,8,["disabled","modelValue"])])),_:1})])),_:1})])),_:1})):s("",!0)])),_:1},8,["model","rules"]),"addView"!==e.dialogState?(d(),m(Q,{key:0,type:"border-card"},{default:u((()=>[r(Y,{label:"BOM组成"},{default:u((()=>[r(M,{dialogState:e.dialogState,"bom-params":e.productFormData.id},null,8,["dialogState","bom-params"])])),_:1})])),_:1})):s("",!0)],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/masterData/materialManage/components/productForm.vue"]]);export{N as default};
