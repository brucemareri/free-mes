import{f as e,D as a,r as t,d as l,q as s,e as i,C as r,o,c as u,k as d,w as n,a as c,j as m,t as f,I as p,z as h,F as _,M as g,N as S,H as C,a1 as w,L as v,a0 as T,_ as y}from"./index-4bfb878d.js";import{u as b}from"./useVxeCrudSchemas-092b8963.js";import{u as x}from"./useXTable-309dffed.js";const j=e({primaryKey:"id",primaryType:"id",primaryTitle:"日志编号",action:!0,actionWidth:"80px",columns:[{title:"链路追踪",field:"traceId",isTable:!1},{title:"用户编号",field:"userId",isSearch:!0},{title:"用户类型",field:"userType",dictType:a.USER_TYPE,dictClass:"number",isSearch:!0},{title:"应用名",field:"applicationName",isSearch:!0},{title:"请求方法名",field:"requestMethod"},{title:"请求地址",field:"requestUrl",isSearch:!0},{title:"请求时间",field:"beginTime",formatter:"formatDate",search:{show:!0,itemRender:{name:"XDataTimePicker"}}},{title:"执行时长",field:"duration",table:{slots:{default:"duration_default"}}},{title:"操作结果",field:"resultCode",isSearch:!0,table:{slots:{default:"resultCode_default"}}}]}),{allSchemas:k}=b(j),A=e=>t.get({url:"/admin-api/infra/api-access-log/page",params:e}),M=l({name:"ApiAccessLog"}),q=y(l({...M,setup(e){const{t:a}=s(),[t]=x({allSchemas:k,topActionSlots:!1,getListApi:A}),l=i(),y=i(!1),b=i("");return(e,s)=>{const i=g,x=S,j=C,A=w,M=v,q=T,D=r("hasPermi");return o(),u(_,null,[d(j,null,{default:n((()=>[d(x,{onRegister:c(t)},{duration_default:n((({row:e})=>[m("span",null,f(e.duration+"ms"),1)])),resultCode_default:n((({row:e})=>[m("span",null,f(0===e.resultCode?"成功":"失败("+e.resultMsg+")"),1)])),actionbtns_default:n((({row:e})=>[p(d(i,{preIcon:"ep:view",title:c(a)("action.detail"),onClick:t=>(e=>{l.value=e,b.value=a("action.detail"),y.value=!0})(e)},null,8,["title","onClick"]),[[D,["infra:api-access-log:query"]]])])),_:1},8,["onRegister"])])),_:1}),d(q,{modelValue:c(y),"onUpdate:modelValue":s[1]||(s[1]=e=>h(y)?y.value=e:null),title:c(b)},{footer:n((()=>[d(M,{title:c(a)("dialog.close"),onClick:s[0]||(s[0]=e=>y.value=!1)},null,8,["title"])])),default:n((()=>[d(A,{schema:c(k).detailSchema,data:c(l)},{duration:n((({row:e})=>[m("span",null,f(e.duration+"ms"),1)])),resultCode:n((({row:e})=>[m("span",null,f(0===e.resultCode?"成功":"失败("+e.resultMsg+")"),1)])),_:1},8,["schema","data"])])),_:1},8,["modelValue","title"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/infra/apiAccessLog/index.vue"]]);export{q as default};
