import{f as e,bi as t,ar as l,a7 as i,bj as o,q as n}from"./index-4bfb878d.js";const a=t=>{const l=e({searchSchema:[],tableSchema:[],formSchema:[],detailSchema:[],printSchema:[]}),i=r(t);l.searchSchema=i||[];const o=s(t);l.tableSchema=o||[];const n=c(t);l.formSchema=n;const a=d(t);l.detailSchema=a;const u=m(t);return l.printSchema=u,{allSchemas:l}},r=e=>{const{t:i}=n(),o=e.searchSpan?e.searchSpan:6,a=24/o,r=[];if(t.eachTree(e.columns,(e=>{var t,n,s,c,d,m,u,p;if((null==e?void 0:e.isSearch)||(null==(t=e.search)?void 0:t.show)){let t=(null==(s=null==(n=null==e?void 0:e.search)?void 0:n.itemRender)?void 0:s.name)||"$input";const h=[];let f={};if(e.dictType){const o={label:"全部",value:""};h.push(o),l(e.dictType).forEach((e=>{h.push(e)})),f.options=h,(null==(d=null==(c=null==e?void 0:e.search)?void 0:c.itemRender)?void 0:d.name)||(t="$select"),f={name:t,options:h,props:{placeholder:i("common.selectText")}}}else f=(null==(m=e.search)?void 0:m.itemRender)?e.search.itemRender:{name:t,props:"$input"==t?{placeholder:i("common.inputText")}:{placeholder:i("common.selectText")}};const v={folding:r.length>a-1,itemRender:e.itemRender?e.itemRender:f,field:e.field,title:(null==(u=e.search)?void 0:u.title)||e.title,slots:null==(p=e.search)?void 0:p.slots,span:o};r.push(v)}})),r.length>0){const e={span:24,align:"right",collapseNode:r.length>a,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:i("common.query"),status:"primary"}},{props:{type:"reset",content:i("common.reset")}}]}};r.push(e)}return r},s=e=>{const{t:l}=n(),i=[];if(e.firstColumn){const t={type:e.firstColumn,width:"50px"};i.push(t)}if(e.primaryKey&&e.primaryType){const t=e.primaryTitle?e.primaryTitle:l("common.index"),o=30*t.length+"px";let n={title:t,field:e.primaryKey,width:o};"id"!=e.primaryType&&(n={...n,type:e.primaryType}),i.push(n)}if(t.eachTree(e.columns,(e=>{var t,l;if(!1!==(null==e?void 0:e.isTable)&&!1!==(null==(t=null==e?void 0:e.table)?void 0:t.show)){const t={...e.table,field:e.field,title:(null==(l=e.table)?void 0:l.title)||e.title,minWidth:"80px"};t.showOverflow="tooltip",(null==e?void 0:e.formatter)&&(t.formatter=e.formatter,t.width=t.width?t.width:160),(null==e?void 0:e.dictType)&&(t.cellRender={name:"XDict",content:e.dictType},t.width=t.width?t.width:160),i.push(t)}})),e.action&&1==e.action){const t={title:e.actionTitle?e.actionTitle:l("table.action"),field:"actionbtns",fixed:"right",width:e.actionWidth?e.actionWidth:"200px",slots:{default:"actionbtns_default"}};i.push(t)}return i},c=e=>{const n=[];return t.eachTree(e.columns,(e=>{var t,a,r,s,c;if(!1!==(null==e?void 0:e.isForm)&&!1!==(null==(t=null==e?void 0:e.form)?void 0:t.show)){let t=(null==(a=null==e?void 0:e.form)?void 0:a.component)||"Input",d="";(null==(r=e.form)?void 0:r.value)?d=null==(s=e.form)?void 0:s.value:"InputNumber"===t&&(d=0);let m={};if(e.dictType){const n=[];e.dictClass&&"number"===e.dictClass?i(e.dictType).forEach((e=>{n.push(e)})):e.dictClass&&"boolean"===e.dictClass?o(e.dictType).forEach((e=>{n.push(e)})):l(e.dictType).forEach((e=>{n.push(e)})),m={options:n},e.form&&e.form.component||(t="Select")}const u={component:t,componentProps:m,value:d,...e.form,field:e.field,label:(null==(c=e.form)?void 0:c.label)||e.title};n.push(u)}})),n},d=e=>{const l=[];return t.eachTree(e.columns,(e=>{var t,i,o,n,a;if(!1!==(null==e?void 0:e.isDetail)&&!1!==(null==(t=e.detail)?void 0:t.show)){const t={...e.detail,field:e.field,label:(null==(i=e.detail)?void 0:i.label)||e.title};e.dictType&&(t.dictType=e.dictType),((null==(o=e.detail)?void 0:o.dateFormat)||"formatDate"==e.formatter)&&(t.dateFormat=(null==(n=null==e?void 0:e.detail)?void 0:n.dateFormat)?null==(a=null==e?void 0:e.detail)?void 0:a.dateFormat:"YYYY-MM-DD HH:mm:ss"),l.push(t)}})),l},m=e=>{const l=[];return t.eachTree(e.columns,(e=>{var t;if(!1!==(null==(t=null==e?void 0:e.print)?void 0:t.show)){const t={field:e.field};l.push(t)}})),l};export{a as u};
