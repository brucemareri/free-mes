import{d as e,K as a,q as l,e as o,f as t,g as n,C as r,o as i,c as p,k as s,w as u,a as d,by as c,F as m,n as f,ar as y,D as g,G as _,X as v,I as b,ce as w,aa as k,ab as h,at as x,au as C,cb as N,Y as V,Z as I,ae as T,b7 as F,ap as D,b8 as S,H as U,aI as Y,_ as j}from"./index-4bfb878d.js";import{_ as R}from"./index-05818f1a.js";import{d as G}from"./formatTime-2097261b.js";import{C as K,g as A,d as E,e as M}from"./form-44fff403.js";import"./Dialog-da8c6c8d.js";const O=e({name:"Config"}),P=j(e({...O,setup(e){const j=a(),{t:O}=l(),P=o(!0),z=o(0),H=o([]),q=t({pageNo:1,pageSize:10,name:void 0,key:void 0,type:void 0,createTime:[]}),B=o(),L=o(!1),X=async()=>{P.value=!0;try{const e=await A(q);H.value=e.list,z.value=e.total}finally{P.value=!1}},Z=()=>{q.pageNo=1,X()},J=()=>{B.value.resetFields(),Z()},Q=o(),W=(e,a)=>{Q.value.openModal(e,a)},$=async()=>{try{await j.exportConfirm(),L.value=!0;const e=await M(q);w.excel(e,"参数配置.xls")}catch{}finally{L.value=!1}};return n((()=>{X()})),(e,a)=>{const l=k,o=h,t=x,n=C,w=N,A=V,M=I,ee=T,ae=F,le=D,oe=S,te=R,ne=U,re=r("hasPermi"),ie=Y;return i(),p(m,null,[s(ne,null,{default:u((()=>[s(ee,{model:d(q),ref_key:"queryFormRef",ref:B,inline:!0,"label-width":"68px"},{default:u((()=>[s(o,{label:"参数名称",prop:"name"},{default:u((()=>[s(l,{modelValue:d(q).name,"onUpdate:modelValue":a[0]||(a[0]=e=>d(q).name=e),placeholder:"请输入参数名称",clearable:"",onKeyup:c(Z,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),s(o,{label:"参数键名",prop:"key"},{default:u((()=>[s(l,{modelValue:d(q).key,"onUpdate:modelValue":a[1]||(a[1]=e=>d(q).key=e),placeholder:"请输入参数键名",clearable:"",onKeyup:c(Z,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),s(o,{label:"系统内置",prop:"type"},{default:u((()=>[s(n,{modelValue:d(q).type,"onUpdate:modelValue":a[2]||(a[2]=e=>d(q).type=e),placeholder:"请选择系统内置",clearable:""},{default:u((()=>[(i(!0),p(m,null,f(d(y)(d(g).INFRA_CONFIG_TYPE),(e=>(i(),_(t,{key:parseInt(e.value),label:e.label,value:parseInt(e.value)},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(o,{label:"创建时间",prop:"createTime"},{default:u((()=>[s(w,{modelValue:d(q).createTime,"onUpdate:modelValue":a[3]||(a[3]=e=>d(q).createTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")]},null,8,["modelValue","default-time"])])),_:1}),s(o,null,{default:u((()=>[s(M,{onClick:Z},{default:u((()=>[s(A,{icon:"ep:search",class:"mr-5px"}),v(" 搜索")])),_:1}),s(M,{onClick:J},{default:u((()=>[s(A,{icon:"ep:refresh",class:"mr-5px"}),v(" 重置")])),_:1}),b((i(),_(M,{type:"primary",onClick:a[4]||(a[4]=e=>W("create"))},{default:u((()=>[s(A,{icon:"ep:plus",class:"mr-5px"}),v(" 新增 ")])),_:1})),[[re,["infra:config:create"]]]),b((i(),_(M,{type:"success",plain:"",onClick:$,loading:d(L)},{default:u((()=>[s(A,{icon:"ep:download",class:"mr-5px"}),v(" 导出 ")])),_:1},8,["loading"])),[[re,["infra:config:export"]]])])),_:1})])),_:1},8,["model"]),b((i(),_(oe,{data:d(H),align:"center"},{default:u((()=>[s(ae,{label:"参数主键",align:"center",prop:"id"}),s(ae,{label:"参数分类",align:"center",prop:"category"}),s(ae,{label:"参数名称",align:"center",prop:"name","show-overflow-tooltip":!0}),s(ae,{label:"参数键名",align:"center",prop:"key","show-overflow-tooltip":!0}),s(ae,{label:"参数键值",align:"center",prop:"value"}),s(ae,{label:"是否可见",align:"center",prop:"visible"},{default:u((e=>[s(le,{type:d(g).INFRA_BOOLEAN_STRING,value:e.row.visible},null,8,["type","value"])])),_:1}),s(ae,{label:"系统内置",align:"center",prop:"type"},{default:u((e=>[s(le,{type:d(g).INFRA_CONFIG_TYPE,value:e.row.type},null,8,["type","value"])])),_:1}),s(ae,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),s(ae,{label:"创建时间",align:"center",prop:"createTime",width:"180",formatter:d(G)},null,8,["formatter"]),s(ae,{label:"操作",align:"center"},{default:u((e=>[b((i(),_(M,{link:"",type:"primary",onClick:a=>W("update",e.row.id)},{default:u((()=>[v(" 编辑 ")])),_:2},1032,["onClick"])),[[re,["infra:config:update"]]]),b((i(),_(M,{link:"",type:"danger",onClick:a=>(async e=>{try{await j.delConfirm(),await E(e),j.success(O("common.delSuccess")),await X()}catch{}})(e.row.id)},{default:u((()=>[v(" 删除 ")])),_:2},1032,["onClick"])),[[re,["infra:config:delete"]]])])),_:1})])),_:1},8,["data"])),[[ie,d(P)]]),s(te,{total:d(z),page:d(q).pageNo,"onUpdate:page":a[5]||(a[5]=e=>d(q).pageNo=e),limit:d(q).pageSize,"onUpdate:limit":a[6]||(a[6]=e=>d(q).pageSize=e),onPagination:X},null,8,["total","page","limit"])])),_:1}),s(K,{ref_key:"modalRef",ref:Q,onSuccess:X},null,512)],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/infra/config/index.vue"]]);export{P as default};
