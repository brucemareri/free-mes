import{r as e,d as a,f as t,e as l,a_ as n,o,c as i,k as d,w as s,F as r,n as c,X as u,t as m,a as p,aR as v,aK as g,ce as b,Z as y,v as w,E as f,cw as k,aq as _,a0 as C,_ as x}from"./index-4bfb878d.js";import{c as h,d as D}from"./dialogForm-c5b6ffe7.js";import{c as S}from"./index-6c8a85ac.js";const F=async a=>await e.get({url:"/admin-api/mes/md/vendor/list",params:a}),V=x(a({__name:"tableModel",props:{tableFormList:{type:Array,default:()=>Array},paginationData:{type:Object,default:()=>{}},tableLoading:{type:Boolean}},emits:["handlePagination","renewalData"],setup(a,{emit:x}){const F=t([{text:"新增",type:"primary",plain:!0,disabled:!1,sign:"save"},{text:"修改",type:"success",plain:!0,disabled:!0,sign:"uqData"},{text:"删除",type:"danger",plain:!0,disabled:!0,sign:"delete"},{text:"导出",type:"warning",plain:!0,disabled:!1,sign:"export"}]),V=l(null),T=t({dialogTitle:"www",dialogVisible:!1,unKnowState:"edit"});let E=l({vendorCode:"",autoGenFlag:!1,vendorName:"",vendorNick:"",vendorEn:"",vendorDes:"",address:"",vendorLevel:"",vendorScore:0,website:"",email:"",tel:"",contact1:"",contact1Tel:"",contact1Email:"",contact2:"",contact2Tel:"",contact2Email:"",creditCode:"",enableFlag:"Y",vendorLogo:"",remark:"",id:""});const L=l([]),j=n((()=>"edit"==T.unKnowState?"确定":"返回")),K=()=>{var a;"edit"==T.unKnowState?null==(a=null==V?void 0:V.value)||a.submitForm().then((()=>{E.value.id?(async a=>await e.put({url:"/admin-api/mes/md/vendor/update",data:a}))(E.value).then((e=>{e&&(v.success("修改成功"),M())})):(async a=>await e.post({url:"/admin-api/mes/md/vendor/save",data:a}))(E.value).then((e=>{v.success("新增成功"),M()}))})):M()},M=()=>{var e;null==(e=V.value)||e.clearFormData(),E.value={vendorCode:"",autoGenFlag:!1,vendorName:"",vendorNick:"",vendorEn:"",vendorDes:"",address:"",vendorLevel:"",vendorScore:0,website:"",email:"",tel:"",contact1:"",contact1Tel:"",contact1Email:"",contact2:"",contact2Tel:"",contact2Email:"",creditCode:"",enableFlag:"Y",vendorLogo:"",remark:"",id:""},x("renewalData"),T.dialogVisible=!1},q=e=>{E.value.vendorCode=e},z=e=>{L.value=e.map((e=>e.id)),F[1].disabled=!L.value.length||L.value.length>=2,F[2].disabled=!L.value.length},A=e=>{const{row:a}=e||{};T.unKnowState="view",T.dialogTitle="查看客户";const t=(null==a?void 0:a.id)||L.value;P(t)},N=e=>{const{row:a}=e||{};T.unKnowState="edit",T.dialogTitle="修改客户";const t=(null==a?void 0:a.id)||L.value;P(t)},P=a=>{(async a=>await e.get({url:`/admin-api/mes/md/vendor/get/${a}`}))(a).then((e=>{E.value=e,T.dialogVisible=!0}))},U=a=>{const{row:t}=a||{},l=(null==t?void 0:t.id)||L.value,n=Array.isArray(l)?l:[l];console.log(n),g.confirm(`是否确认删除客户编号为:${l}`).then((()=>{(async a=>await e.delete({url:"/admin-api/mes/md/vendor/batch",data:a}))(n).then((e=>{v.success("删除成功"),x("renewalData")})).finally((()=>{}))}))},Y=async()=>{const a=await(async()=>await e.download({url:"/admin-api/mes/md/vendor/export"}))();b.excel(a,"供应商管理.xls")},G=({value:e})=>{x("handlePagination",e)};return(e,t)=>{const l=y,n=w,v=f,g=k,b=_,x=C;return o(),i(r,null,[d(v,{gutter:10,style:{"margin-bottom":"20px"}},{default:s((()=>[(o(!0),i(r,null,c(F,((e,a)=>(o(),i("div",{key:a},[d(n,{span:2},{default:s((()=>[d(l,{onClick:a=>(e=>{if(""!=e.sign)switch(e.sign){case"save":T.unKnowState="edit",T.dialogTitle="添加客户信息",T.dialogVisible=!T.dialogVisible;break;case"uqData":N();break;case"delete":U();break;case"export":Y()}})(e),disabled:e.disabled,type:e.type,plain:e.plain},{default:s((()=>[u(m(e.text),1)])),_:2},1032,["onClick","disabled","type","plain"])])),_:2},1024)])))),128))])),_:1}),d(S,{loading:a.tableLoading,tableData:a.tableFormList,columns:p(h),pagination:a.paginationData,onPaginationChange:G,onSelectionChange:z,"is-selection":!0,"is-border":!1},{vendorCode:s((({scope:e})=>[d(l,{link:"",type:"primary",onClick:a=>A(e)},{default:s((()=>[u(m(e.row.vendorCode),1)])),_:2},1032,["onClick"])])),vendorScore:s((({scope:e})=>[d(g,{modelValue:e.row.vendorScore,"onUpdate:modelValue":a=>e.row.vendorScore=a,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),enableFlag:s((({scope:e})=>[d(b,{type:"Y"===e.row.enableFlag?"success":"danger"},{default:s((()=>[u(m("Y"===e.row.enableFlag?"是":"否"),1)])),_:2},1032,["type"])])),operation:s((({scope:e})=>[d(l,{style:{"font-size":"17px"},link:"",type:"primary",onClick:a=>A(e)},{default:s((()=>[u("查看")])),_:2},1032,["onClick"]),d(l,{style:{"font-size":"17px"},link:"",type:"primary",onClick:a=>N(e)},{default:s((()=>[u("修改")])),_:2},1032,["onClick"]),d(l,{style:{"font-size":"17px"},link:"",type:"danger",onClick:a=>U(e)},{default:s((()=>[u("删除")])),_:2},1032,["onClick"])])),_:1},8,["loading","tableData","columns","pagination"]),d(x,{title:T.dialogTitle,modelValue:T.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>T.dialogVisible=e),width:"60%",onClose:M},{footer:s((()=>[d(l,{type:"primary",onClick:K},{default:s((()=>[u(m(j.value),1)])),_:1}),d(l,{onClick:M},{default:s((()=>[u("取消")])),_:1})])),default:s((()=>[d(D,{ref_key:"dialogFormDefine",ref:V,onGenerateClientCode:q,"dialog-form-params":p(E),"customer-form-data":T},null,8,["dialog-form-params","customer-form-data"])])),_:1},8,["title","modelValue"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/masterData/supplierManage/components/tableModel.vue"]]),T=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{T as a,F as q,V as t};
