import{f as e,r as a,d as o,e as t,g as r,o as l,c as s,k as n,w as p,a as i,j as d,X as c,F as u,aR as m,H as g,Z as f,aP as y,_ as b}from"./index-4bfb878d.js";import{c as h}from"./index-529a6cde.js";import{c as w}from"./index-6c8a85ac.js";const _=e([{label:"订单编号",type:"input",prop:"workorderCode",placeholder:"订单编号"},{label:"开始时间",type:"date",prop:"startTime",placeholder:"请选择开始时间"},{label:"结束时间",type:"date",prop:"requestDate",placeholder:"请选择结束时间"},{label:"产品名称",type:"input",prop:"productName",placeholder:"产品名称"}]),v=[{label:"订单编号",prop:"workorderCode"},{label:"订单名称",prop:"workorderName"},{label:"产品编号",prop:"productCode"},{label:"产品名称",prop:"productName"},{label:"开始日期",prop:"startTime"},{label:"结束时间",prop:"requestDate"}],x={style:{"margin-bottom":"20px"}},k=b(o({__name:"index",setup(o){const b=e({workorderCode:"",startTime:"",requestDate:"",productName:""});let k=e({total:0,pageSize:10,pageSizes:[5,10,15,20],currentPage:1});const D=t(!1);let z=e([]),C=t(!1);const j=()=>{S()},N=()=>{C.value=!0,(async()=>await a.get({url:"/admin-api/mes/pro/workorder/synchronous"}))().then((e=>{S().then((()=>{m.success("同步成功")}))})).finally((()=>{C.value=!1}))},P=e=>{k=null==e?void 0:e.value,S()},S=()=>new Promise(((e,o)=>{const t={...b,pageNo:k.currentPage,pageSize:k.pageSize};D.value=!0,(async e=>await a.get({url:"/admin-api/mes/pro/workorder/synchronizeOrdersList",params:e}))(t).then((a=>{const{total:o,list:t=[]}=a||{};e(a),k.total=o,z=t})).finally((()=>{D.value=!1}))}));return r((()=>{S()})),(e,a)=>{const o=g,t=f,r=y;return l(),s(u,null,[n(o,null,{default:p((()=>[n(h,{"conditions-list":i(_),"search-model":b,onQueryData:j},null,8,["conditions-list","search-model"])])),_:1}),n(o,null,{default:p((()=>[d("div",x,[n(r,{class:"box-item",effect:"dark",content:"同步第三方订单时使用",placement:"top-start"},{default:p((()=>[n(t,{type:"primary",icon:"RefreshLeft",onClick:N,loading:i(C)},{default:p((()=>[c("同步订单")])),_:1},8,["loading"])])),_:1})]),n(w,{loading:D.value,columns:i(v),tableData:i(z),pagination:i(k),onPaginationChange:P},null,8,["loading","columns","tableData","pagination"])])),_:1})],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/prodMgmt/synchronize/index.vue"]]);export{k as default};
