import{d as e,f as a,e as t,a_ as l,o as i,c as n,k as o,w as s,F as d,n as c,X as r,t as p,a as u,aK as m,aR as g,ce as b,Z as f,v as y,E as w,aq as k,a0 as v,_ as C}from"./index-4bfb878d.js";import{d as _,q as x,a as D,b as F}from"./dialogForm-ca8bfe38.js";import{c as T}from"./data-fbe48da5.js";import{c as h}from"./index-6c8a85ac.js";import{C as V,a as j}from"./const-f443e30b.js";import"./pmOrder-563fbf59.js";const S=C(e({__name:"tableModel",props:{tableLoading:{type:Boolean},tableFormList:{type:Object,default:()=>{}},paginationData:{type:Object,default:()=>{}}},emits:["handlePagination","upDateTableList"],setup(e,{emit:C}){const S=a([{text:"新增",type:"primary",plain:!0,disabled:!1,sign:"save"},{text:"修改",type:"success",plain:!0,disabled:!0,sign:"uqData"},{text:"批量删除",type:"danger",plain:!0,disabled:!0,sign:"delete"},{text:"导出",type:"warning",plain:!0,disabled:!1,sign:"export"}]),E=t(null),L=a({dialogTitle:"www",dialogVisible:!1,unKnowState:"edit"}),K=t({clientCode:"",autoGenFlag:!1,clientName:"",clientNick:"",clientEn:"",clientType:"",clientDes:"",address:"",website:"",email:"",tel:"",clientLogo:"",contact1:"",contact1Tel:"",contact1Email:"",contact2:"",contact2Tel:"",contact2Email:"",creditCode:"",enableFlag:"Y",remark:"",id:""}),z=t([]),q=l((()=>"edit"==L.unKnowState?"确定":"返回")),M=()=>{L.dialogVisible=!1,C("upDateTableList")},N=()=>{var e;"edit"==L.unKnowState?null==(e=null==E?void 0:E.value)||e.submitForm():O()},O=()=>{var e;null==(e=null==E?void 0:E.value)||e.resetForm(),L.dialogVisible=!1,K.value={clientCode:"",autoGenFlag:!1,clientName:"",clientNick:"",clientEn:"",clientType:"",clientDes:"",address:"",website:"",email:"",tel:"",clientLogo:"",contact1:"",contact1Tel:"",contact1Email:"",contact2:"",contact2Tel:"",contact2Email:"",creditCode:"",enableFlag:"Y",remark:"",id:""}},P=e=>{z.value=e.map((e=>e.id)),S[1].disabled=!z.value.length||z.value.length>=2,S[2].disabled=!z.value.length},U=e=>{L.unKnowState="view",L.dialogTitle="查看客户",A(e.id)},Y=e=>{L.unKnowState="edit",L.dialogTitle="修改客户";const a=(null==e?void 0:e.id)||z.value;A(a)},A=e=>{x(e).then((e=>{K.value=e,L.dialogVisible=!L.dialogVisible}))},G=e=>{const a=(null==e?void 0:e.id)||z.value,t=Array.isArray(a)?a:[a];console.log(t),m.confirm(`是否确认删除客户编号为:${a}`).then((()=>{D(t).then((e=>{g.success("删除成功"),M()}))}))},B=async()=>{const e=await F();b.excel(e,"客户管理.xls")},R=e=>{C("handlePagination",e)};return(a,t)=>{const l=f,m=y,g=w,b=k,C=v;return i(),n(d,null,[o(g,{gutter:10,style:{"margin-bottom":"16px"}},{default:s((()=>[(i(!0),n(d,null,c(S,((e,a)=>(i(),n("div",{key:a},[o(m,{span:2},{default:s((()=>[o(l,{onClick:a=>(e=>{if(""!=e.sign)switch(e.sign){case"save":L.unKnowState="edit",L.dialogTitle="添加客户信息",L.dialogVisible=!L.dialogVisible;break;case"uqData":Y();break;case"delete":G();break;case"export":B()}})(e),disabled:e.disabled,type:e.type,plain:e.plain},{default:s((()=>[r(p(e.text),1)])),_:2},1032,["onClick","disabled","type","plain"])])),_:2},1024)])))),128))])),_:1}),o(h,{loading:e.tableLoading,columns:u(T),pagination:e.paginationData,isSelection:!0,tableData:e.tableFormList,onSelectionChange:P,onPaginationChange:R},{clientCode:s((({scope:e})=>[o(l,{link:"",type:"primary",onClick:a=>U(e.row)},{default:s((()=>[r(p(e.row.clientCode),1)])),_:2},1032,["onClick"])])),clientType:s((({scope:e})=>[r(p(u(V)[e.row.clientType]),1)])),enableFlag:s((({scope:e})=>[o(b,{type:"Y"===e.row.enableFlag?"success":"warning"},{default:s((()=>[r(p(u(j)[e.row.enableFlag]),1)])),_:2},1032,["type"])])),operation:s((({scope:e})=>[o(l,{style:{"font-size":"17px"},link:"",type:"primary",size:"small",onClick:a=>U(e.row)},{default:s((()=>[r(" 详情 ")])),_:2},1032,["onClick"]),o(l,{style:{"font-size":"17px"},link:"",type:"primary",size:"small",onClick:a=>Y(e.row)},{default:s((()=>[r(" 修改 ")])),_:2},1032,["onClick"]),o(l,{style:{"font-size":"17px"},link:"",type:"danger",size:"small",onClick:a=>G(e.row)},{default:s((()=>[r(" 删除 ")])),_:2},1032,["onClick"])])),default:s((()=>[r(" > ")])),_:1},8,["loading","columns","pagination","tableData"]),o(C,{onClose:O,title:L.dialogTitle,modelValue:L.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>L.dialogVisible=e),width:"68%"},{footer:s((()=>[o(l,{type:"primary",onClick:N},{default:s((()=>[r(p(q.value),1)])),_:1}),o(l,{onClick:O},{default:s((()=>[r("取消")])),_:1})])),default:s((()=>[o(_,{ref_key:"dialogFormDefine",ref:E,"dialog-form-params":K.value,"customer-form-data":L,onUpDateFormData:M},null,8,["dialog-form-params","customer-form-data"])])),_:1},8,["title","modelValue"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/masterData/clientManage/components/tableModel.vue"]]);export{S as default};
