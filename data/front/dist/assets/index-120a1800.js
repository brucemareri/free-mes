import{q as e,f as a,D as l,d as t,K as i,e as s,C as o,o as n,c as r,k as c,w as u,a as d,I as m,G as p,J as f,z as v,F as y,L as g,M as h,N as S,H as k,aJ as w,a1 as _,a0 as b,_ as C}from"./index-4bfb878d.js";import{r as T}from"./formRules-eb36c657.js";import{u as I}from"./useVxeCrudSchemas-092b8963.js";import{g as x,d as A,a as M,c as R,u as j}from"./index-083d1298.js";import{u as E}from"./useXTable-309dffed.js";const{t:N}=e(),V=a({mail:[{required:!0,message:N("profile.rules.mail"),trigger:"blur"},{type:"email",message:N("profile.rules.truemail"),trigger:["blur","change"]}],username:[T],password:[T],host:[T],port:[T],sslEnable:[T]}),D=a({primaryKey:"id",primaryTitle:"编号",primaryType:"id",action:!0,actionWidth:"200",columns:[{title:"邮箱",field:"mail",isSearch:!0},{title:"用户名",field:"username",isSearch:!0},{title:"密码",field:"password",isTable:!1},{title:"SMTP 服务器域名",field:"host"},{title:"SMTP 服务器端口",field:"port",form:{component:"InputNumber",value:465}},{title:"是否开启 SSL",field:"sslEnable",dictType:l.INFRA_BOOLEAN_STRING,dictClass:"boolean"},{title:"创建时间",field:"createTime",isForm:!1,formatter:"formatDate",table:{width:180}}]}),{allSchemas:F}=I(D),L=t({name:"MailAccount"}),q=C(t({...L,setup(a){const{t:l}=e(),t=i(),[C,{reload:T,deleteData:I}]=E({allSchemas:F,getListApi:x,deleteApi:A}),N=s(!1),D=s("edit"),L=s(!1),q=s(""),P=s(!1),z=s(),G=s(),J=e=>{L.value=!0,D.value=l("action."+e),q.value=e,N.value=!0};return(e,a)=>{const i=g,s=h,x=S,A=k,E=w,K=_,O=b,U=o("hasPermi");return n(),r(y,null,[c(A,null,{default:u((()=>[c(x,{onRegister:d(C)},{toolbar_buttons:u((()=>[m(c(i,{type:"primary",preIcon:"ep:zoom-in",title:d(l)("action.add"),onClick:a[0]||(a[0]=e=>(J("create"),void(L.value=!1)))},null,8,["title"]),[[U,["system:mail-account:create"]]])])),actionbtns_default:u((({row:e})=>[m(c(s,{preIcon:"ep:edit",title:d(l)("action.edit"),onClick:a=>(async e=>{var a;J("update");const l=await M(e);null==(a=d(z))||a.setValues(l),L.value=!1})(e.id)},null,8,["title","onClick"]),[[U,["system:mail-account:update"]]]),m(c(s,{preIcon:"ep:view",title:d(l)("action.detail"),onClick:a=>(async e=>{J("detail");const a=await M(e);G.value=a,L.value=!1})(e.id)},null,8,["title","onClick"]),[[U,["system:mail-account:query"]]]),m(c(s,{preIcon:"ep:delete",title:d(l)("action.del"),onClick:a=>d(I)(e.id)},null,8,["title","onClick"]),[[U,["system:mail-account:delete"]]])])),_:1},8,["onRegister"])])),_:1}),c(O,{id:"mailAccountModel",loading:d(L),modelValue:d(N),"onUpdate:modelValue":a[3]||(a[3]=e=>v(N)?N.value=e:null),title:d(D)},{footer:u((()=>[["create","update"].includes(d(q))?(n(),p(i,{key:0,type:"primary",title:d(l)("action.save"),loading:d(P),onClick:a[1]||(a[1]=e=>(async()=>{var e;const a=null==(e=d(z))?void 0:e.getElFormRef();a&&a.validate((async e=>{var a;if(e){P.value=!0;try{const e=null==(a=d(z))?void 0:a.formModel;"create"===q.value?(await R(e),t.success(l("common.createSuccess"))):(await j(e),t.success(l("common.updateSuccess"))),N.value=!1}finally{P.value=!1,await T()}}}))})())},null,8,["title","loading"])):f("",!0),c(i,{loading:d(P),title:d(l)("dialog.close"),onClick:a[2]||(a[2]=e=>N.value=!1)},null,8,["loading","title"])])),default:u((()=>[["create","update"].includes(d(q))?(n(),p(E,{key:0,ref_key:"formRef",ref:z,schema:d(F).formSchema,rules:d(V)},null,8,["schema","rules"])):f("",!0),"detail"===d(q)?(n(),p(K,{key:1,schema:d(F).detailSchema,data:d(G)},null,8,["schema","data"])):f("",!0)])),_:1},8,["loading","modelValue","title"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/system/mail/account/index.vue"]]);export{q as default};
