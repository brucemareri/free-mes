import{q as e,f as t,d as i,K as a,u as o,e as n,C as r,o as s,c as l,k as c,w as m,a as d,I as p,F as f,ce as u,L as k,M as w,N as h,H as C,_ as g}from"./index-4bfb878d.js";import{b as y,d as _,s as v,e as j}from"./index-33f98cf5.js";import{r as b}from"./formRules-eb36c657.js";import{u as x}from"./useVxeCrudSchemas-092b8963.js";import T from"./ImportTable-bf7dd489.js";import I from"./Preview-2b1be161.js";import{u as S}from"./useXTable-309dffed.js";import"./index-1e8b251d.js";import"./tree-5260b4e2.js";const{t:D}=e();t({title:[b],type:[b],status:[b]});const R=t({primaryKey:"id",primaryType:"seq",action:!0,actionWidth:"400px",columns:[{title:"表名称",field:"tableName",isSearch:!0},{title:"表描述",field:"tableComment",isSearch:!0},{title:"实体",field:"className",isSearch:!0},{title:D("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,search:{show:!0,itemRender:{name:"XDataTimePicker"}}},{title:D("common.updateTime"),field:"updateTime",formatter:"formatDate",isForm:!1}]}),{allSchemas:N}=x(R),q=i({name:"Codegen"}),z=g(i({...q,setup(t){const{t:i}=e(),g=a(),{push:b}=o(),[x,{reload:D,deleteData:R}]=S({allSchemas:N,getListApi:y,deleteApi:_}),q=n(),z=n();return(e,t)=>{const a=k,o=w,n=h,y=C,_=r("hasPermi");return s(),l(f,null,[c(y,null,{default:m((()=>[c(n,{onRegister:d(x)},{toolbar_buttons:m((()=>[p(c(a,{type:"primary",preIcon:"ep:zoom-in",title:d(i)("action.import"),onClick:t[0]||(t[0]=e=>{q.value.show()})},null,8,["title"]),[[_,["infra:codegen:create"]]])])),actionbtns_default:m((({row:e})=>[p(c(o,{preIcon:"ep:view",title:d(i)("action.preview"),onClick:t=>(e=>{z.value.show(e)})(e)},null,8,["title","onClick"]),[[_,["infra:codegen:query"]]]),p(c(o,{preIcon:"ep:edit",title:d(i)("action.edit"),onClick:t=>{return i=e.id,void b("/codegen/edit?id="+i);var i}},null,8,["title","onClick"]),[[_,["infra:codegen:update"]]]),p(c(o,{preIcon:"ep:delete",title:d(i)("action.del"),onClick:t=>d(R)(e.id)},null,8,["title","onClick"]),[[_,["infra:codegen:delete"]]]),p(c(o,{preIcon:"ep:refresh",title:d(i)("action.sync"),onClick:t=>(e=>{const t=e.tableName;g.confirm("确认要强制同步"+t+"表结构吗?",i("common.reminder")).then((async()=>{await v(e.id),g.success("同步成功")}))})(e)},null,8,["title","onClick"]),[[_,["infra:codegen:update"]]]),p(c(o,{preIcon:"ep:download",title:d(i)("action.generate"),onClick:t=>(async e=>{const t=await j(e.id);u.zip(t,"codegen-"+e.className+".zip")})(e)},null,8,["title","onClick"]),[[_,["infra:codegen:download"]]])])),_:1},8,["onRegister"])])),_:1}),c(d(T),{ref_key:"importRef",ref:q,onOk:t[1]||(t[1]=e=>d(D)())},null,512),c(d(I),{ref_key:"previewRef",ref:z},null,512)],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/infra/codegen/index.vue"]]);export{z as default};
