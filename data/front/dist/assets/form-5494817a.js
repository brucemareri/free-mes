import{r as e,d as a,q as l,K as t,e as s,f as u,o,G as r,w as d,j as i,k as n,a as m,X as p,I as c,c as v,F as f,n as _,ar as y,D as g,z as b,aa as V,ab as k,cS as h,at as w,au as S,ae as x,Z as I,aI as U,_ as j}from"./index-4bfb878d.js";import{_ as M}from"./Dialog-da8c6c8d.js";const T=a=>e.get({url:"/admin-api/system/notice/page",params:a}),q=a=>e.delete({url:"/admin-api/system/notice/delete?id="+a}),O={class:"dialog-footer"},C=j(a({__name:"form",emits:["success"],setup(a,{expose:j,emit:T}){const{t:q}=l(),C=t(),E=s(!1),N=s(""),D=s(!1),z=s(""),F=s({id:void 0,title:"",type:void 0,content:"",status:void 0,remark:""}),P=u({title:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],type:[{required:!0,message:"公告类型不能为空",trigger:"change"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}],content:[{required:!0,message:"公告内容不能为空",trigger:"blur"}]}),Y=s();j({openModal:async(a,l)=>{if(E.value=!0,N.value=q("action."+a),z.value=a,G(),l){D.value=!0;try{F.value=await(a=>e.get({url:"/admin-api/system/notice/get?id="+a}))(l)}finally{D.value=!1}}}});const A=async()=>{if(!Y)return;if(await Y.value.validate()){D.value=!0;try{const a=F.value;"create"===z.value?(await(a=>e.post({url:"/admin-api/system/notice/create",data:a}))(a),C.success(q("common.createSuccess"))):(await(a=>e.put({url:"/admin-api/system/notice/update",data:a}))(a),C.success(q("common.updateSuccess"))),E.value=!1,T("success")}finally{D.value=!1}}},G=()=>{var e;F.value={id:void 0,title:"",type:void 0,content:"",status:void 0,remark:""},null==(e=Y.value)||e.resetFields()};return(e,a)=>{const l=V,t=k,s=h,u=w,j=S,T=x,q=I,C=M,z=U;return o(),r(C,{title:m(N),modelValue:m(E),"onUpdate:modelValue":a[5]||(a[5]=e=>b(E)?E.value=e:null),width:"800"},{footer:d((()=>[i("div",O,[n(q,{onClick:A,type:"primary",disabled:m(D)},{default:d((()=>[p("确 定")])),_:1},8,["disabled"]),n(q,{onClick:a[4]||(a[4]=e=>E.value=!1)},{default:d((()=>[p("取 消")])),_:1})])])),default:d((()=>[c((o(),r(T,{ref_key:"formRef",ref:Y,model:m(F),rules:m(P),"label-width":"80px"},{default:d((()=>[n(t,{label:"公告标题",prop:"title"},{default:d((()=>[n(l,{modelValue:m(F).title,"onUpdate:modelValue":a[0]||(a[0]=e=>m(F).title=e),placeholder:"请输入公告标题"},null,8,["modelValue"])])),_:1}),n(t,{label:"公告内容",prop:"content"},{default:d((()=>[n(s,{"model-value":m(F).content,height:"150px"},null,8,["model-value"])])),_:1}),n(t,{label:"公告类型",prop:"type"},{default:d((()=>[n(j,{modelValue:m(F).type,"onUpdate:modelValue":a[1]||(a[1]=e=>m(F).type=e),placeholder:"请选择公告类型",clearable:""},{default:d((()=>[(o(!0),v(f,null,_(m(y)(m(g).SYSTEM_NOTICE_TYPE),(e=>(o(),r(u,{key:parseInt(e.value),label:e.label,value:parseInt(e.value)},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(t,{label:"状态",prop:"status"},{default:d((()=>[n(j,{modelValue:m(F).status,"onUpdate:modelValue":a[2]||(a[2]=e=>m(F).status=e),placeholder:"请选择状态",clearable:""},{default:d((()=>[(o(!0),v(f,null,_(m(y)(m(g).COMMON_STATUS),(e=>(o(),r(u,{key:parseInt(e.value),label:e.label,value:parseInt(e.value)},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(t,{label:"备注",prop:"remark"},{default:d((()=>[n(l,{modelValue:m(F).remark,"onUpdate:modelValue":a[3]||(a[3]=e=>m(F).remark=e),type:"textarea",placeholder:"请输备注"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])),[[z,m(D)]])])),_:1},8,["title","modelValue"])}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/system/notice/form.vue"]]),E=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{C as N,q as d,E as f,T as g};
