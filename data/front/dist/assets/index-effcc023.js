import{d as e,K as a,q as l,e as t,f as s,g as o,C as n,o as i,c as r,k as u,w as p,a as d,by as c,F as m,n as f,ar as _,D as y,G as g,X as v,I as b,ap as w,aa as k,ab as C,at as S,au as x,Y as N,Z as T,ae as h,b7 as M,b8 as U,H as j,aI as V,_ as I}from"./index-4bfb878d.js";import{_ as O}from"./index-05818f1a.js";import{d as E}from"./formatTime-2097261b.js";import{N as z,g as D,d as F}from"./form-5494817a.js";import"./Dialog-da8c6c8d.js";const K=I(e({__name:"index",setup(e){const I=a(),{t:K}=l(),P=t(!0),Y=t(0),q=t([]),A=s({title:"",type:void 0,status:void 0,pageNo:1,pageSize:100}),R=t(),G=async()=>{P.value=!0;try{const e=await D(A);q.value=e.list,Y.value=e.total}finally{P.value=!1}},H=()=>{A.pageNo=1,G()},X=()=>{R.value.resetFields(),H()},Z=t(),B=(e,a)=>{Z.value.openModal(e,a)};return o((()=>{G()})),(e,a)=>{const l=k,t=C,s=S,o=x,D=N,J=T,L=h,Q=M,W=U,$=O,ee=j,ae=n("hasPermi"),le=V;return i(),r(m,null,[u(ee,null,{default:p((()=>[u(L,{model:d(A),ref_key:"queryFormRef",ref:R,inline:!0,"label-width":"68px"},{default:p((()=>[u(t,{label:"公告标题",prop:"title"},{default:p((()=>[u(l,{modelValue:d(A).title,"onUpdate:modelValue":a[0]||(a[0]=e=>d(A).title=e),placeholder:"请输入公告标题",clearable:"",onKeyup:c(H,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),u(t,{label:"公告状态",prop:"status"},{default:p((()=>[u(o,{modelValue:d(A).status,"onUpdate:modelValue":a[1]||(a[1]=e=>d(A).status=e),placeholder:"请选择公告状态",clearable:""},{default:p((()=>[(i(!0),r(m,null,f(d(_)(d(y).COMMON_STATUS),(e=>(i(),g(s,{key:parseInt(e.value),label:e.label,value:parseInt(e.value)},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(t,null,{default:p((()=>[u(J,{onClick:H},{default:p((()=>[u(D,{icon:"ep:search",class:"mr-5px"}),v(" 搜索")])),_:1}),u(J,{onClick:X},{default:p((()=>[u(D,{icon:"ep:refresh",class:"mr-5px"}),v(" 重置")])),_:1}),b((i(),g(J,{type:"primary",onClick:a[2]||(a[2]=e=>B("create"))},{default:p((()=>[u(D,{icon:"ep:plus",class:"mr-5px"}),v(" 新增 ")])),_:1})),[[ae,["system:notice:create"]]])])),_:1})])),_:1},8,["model"]),b((i(),g(W,{data:d(q),align:"center"},{default:p((()=>[u(Q,{label:"公告编号",align:"center",prop:"id"}),u(Q,{label:"公告标题",align:"center",prop:"title"}),u(Q,{label:"公告类型",align:"center",prop:"type"},{default:p((e=>[u(d(w),{type:d(y).SYSTEM_NOTICE_TYPE,value:e.row.type},null,8,["type","value"])])),_:1}),u(Q,{label:"状态",align:"center",prop:"status"},{default:p((e=>[u(d(w),{type:d(y).COMMON_STATUS,value:e.row.status},null,8,["type","value"])])),_:1}),u(Q,{label:"创建时间",align:"center",prop:"createTime",width:"180",formatter:d(E)},null,8,["formatter"]),u(Q,{label:"操作",align:"center"},{default:p((e=>[b((i(),g(J,{link:"",type:"primary",onClick:a=>B("update",e.row.id)},{default:p((()=>[v(" 编辑 ")])),_:2},1032,["onClick"])),[[ae,["system:notice:update"]]]),b((i(),g(J,{link:"",type:"danger",onClick:a=>(async e=>{try{await I.delConfirm(),await F(e),I.success(K("common.delSuccess")),await G()}catch{}})(e.row.id)},{default:p((()=>[v(" 删除 ")])),_:2},1032,["onClick"])),[[ae,["system:notice:delete"]]])])),_:1})])),_:1},8,["data"])),[[le,d(P)]]),u($,{total:d(Y),page:d(A).pageNo,"onUpdate:page":a[3]||(a[3]=e=>d(A).pageNo=e),limit:d(A).pageSize,"onUpdate:limit":a[4]||(a[4]=e=>d(A).pageSize=e),onPagination:G},null,8,["total","page","limit"])])),_:1}),u(z,{ref_key:"modalRef",ref:Z,onSuccess:G},null,512)],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/system/notice/index.vue"]]);export{K as default};
