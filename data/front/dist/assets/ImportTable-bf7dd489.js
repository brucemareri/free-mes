import{d as e,q as a,K as l,e as o,f as t,a6 as n,o as d,G as s,w as i,j as u,k as r,a as c,c as m,F as f,n as p,I as v,z as g,at as b,au as h,ab as _,aa as x,L as y,ae as C,a0 as I,aI as k,_ as w}from"./index-4bfb878d.js";import{a as V,c as S}from"./index-33f98cf5.js";import{g as j}from"./index-1e8b251d.js";const U={class:"dialog-footer"},T=w(e({__name:"ImportTable",emits:["ok"],setup(e,{expose:w,emit:T}){const{t:q}=a(),R=l(),E=o(!1),z=o(!0),D=t({name:void 0,comment:void 0,dataSourceConfigId:0}),F=o([]),G=o([]),K=async()=>{z.value=!0;const e=await V(D);G.value=e,z.value=!1},L=o(),M=o([]),N=()=>{E.value=!1,M.value=[]};return w({show:async()=>{const e=await j();F.value=e,D.dataSourceConfigId=F.value[0].id,E.value=!0,await K()}}),(e,a)=>{const l=b,o=h,t=_,w=x,V=y,j=C,A=n("vxe-column"),B=n("vxe-table"),H=I,J=k;return d(),s(H,{title:"导入表",modelValue:c(E),"onUpdate:modelValue":a[7]||(a[7]=e=>g(E)?E.value=e:null)},{footer:i((()=>[u("div",U,[r(V,{type:"primary",title:c(q)("action.import"),onClick:a[5]||(a[5]=e=>(async()=>{var e,a;0!==(null==(e=L.value)?void 0:e.getCheckboxRecords().length)?(null==(a=L.value)||a.getCheckboxRecords().forEach((e=>{M.value.push(e.name)})),await S({dataSourceConfigId:D.dataSourceConfigId,tableNames:M.value}),R.success("导入成功"),T("ok"),N()):R.error("请选择要导入的表")})())},null,8,["title"]),r(V,{title:c(q)("dialog.close"),onClick:a[6]||(a[6]=e=>N())},null,8,["title"])])])),default:i((()=>[r(j,{model:c(D),ref:"queryRef",inline:!0},{default:i((()=>[r(t,{label:"数据源",prop:"dataSourceConfigId"},{default:i((()=>[r(o,{modelValue:c(D).dataSourceConfigId,"onUpdate:modelValue":a[0]||(a[0]=e=>c(D).dataSourceConfigId=e),placeholder:"请选择数据源",clearable:""},{default:i((()=>[(d(!0),m(f,null,p(c(F),(e=>(d(),s(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(t,{label:"表名称",prop:"name"},{default:i((()=>[r(w,{modelValue:c(D).name,"onUpdate:modelValue":a[1]||(a[1]=e=>c(D).name=e),placeholder:"请输入表名称",clearable:""},null,8,["modelValue"])])),_:1}),r(t,{label:"表描述",prop:"comment"},{default:i((()=>[r(w,{modelValue:c(D).comment,"onUpdate:modelValue":a[2]||(a[2]=e=>c(D).comment=e),placeholder:"请输入表描述",clearable:""},null,8,["modelValue"])])),_:1}),r(t,null,{default:i((()=>[r(V,{type:"primary",preIcon:"ep:search",title:c(q)("common.query"),onClick:a[3]||(a[3]=e=>(async()=>{await K()})())},null,8,["title"]),r(V,{preIcon:"ep:refresh-right",title:c(q)("common.reset"),onClick:a[4]||(a[4]=e=>(async()=>{D.name=void 0,D.comment=void 0,D.dataSourceConfigId=0,await K()})())},null,8,["title"])])),_:1})])),_:1},8,["model"]),v((d(),s(B,{ref_key:"xTable",ref:L,data:c(G),"checkbox-config":{highlight:!0,range:!0},height:"260px",class:"xtable-scrollbar"},{default:i((()=>[r(A,{type:"checkbox",width:"60"}),r(A,{field:"name",title:"表名称"}),r(A,{field:"comment",title:"表描述"})])),_:1},8,["data"])),[[J,c(z)]])])),_:1},8,["modelValue"])}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/infra/codegen/components/ImportTable.vue"]]);export{T as default};
