import{r as e,d as a,e as s,g as t,o as i,G as l,w as o,k as n,j as r,t as c,c as d,X as p,F as u,a as m,K as f,b7 as y,M as w,b8 as v,_}from"./index-4bfb878d.js";import{S as h}from"./constants-97c4dd5f.js";import{g}from"./profile-d343b4ae.js";const U=["src"],k={class:"mr-5"},b=_(a({__name:"UserSocial",setup(a){const _=f(),b=s([]),j=s(),x=a=>{const s=location.origin+"/user/profile?type="+a.type;((a,s)=>e.get({url:"/admin-api/system/auth/social-auth-redirect?type="+a+"&redirectUri="+s}))(a.type,encodeURIComponent(s)).then((e=>{window.location.href=e.data}))},C=async a=>{var s,t;await(s=a.type,t=a.openid,e.delete({url:"/admin-api/system/social-user/unbind",data:{type:s,openid:t}}))&&(a.openid=void 0),_.success("解绑成功")};return t((async()=>{await(async()=>{var e;const a=await g();j.value=a;for(const s in h){const a={...h[s]};if(b.value.push(a),null==(e=j.value)?void 0:e.socialUsers)for(const e in j.value.socialUsers)if(a.type===j.value.socialUsers[e].type){a.openid=j.value.socialUsers[e].openid;break}}})()})),(e,a)=>{const s=y,t=w,f=v;return i(),l(f,{data:m(b),"show-header":!1},{default:o((()=>[n(s,{type:"seq",title:"序号",width:"60",fixed:"left"}),n(s,{label:"社交平台",align:"left",width:"120"},{default:o((({row:e})=>[r("img",{class:"h-5 align-middle",src:e.img,alt:""},null,8,U),r("p",k,c(e.title),1)])),_:1}),n(s,{label:"操作",align:"center"},{default:o((({row:e})=>[e.openid?(i(),d(u,{key:0},[p(" 已绑定 "),n(t,{type:"primary",class:"mr-5",onClick:a=>C(e),title:"(解绑)"},null,8,["onClick"])],64)):(i(),d(u,{key:1},[p(" 未绑定 "),n(t,{type:"primary",class:"mr-5",onClick:a=>x(e),title:"(绑定)"},null,8,["onClick"])],64))])),_:1})])),_:1},8,["data"])}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/profile/components/UserSocial.vue"]]);export{b as default};
