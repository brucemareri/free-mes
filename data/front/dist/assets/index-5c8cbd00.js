import{q as e,cW as a,D as t,f as l,d as s,K as i,e as n,C as o,o as c,c as r,k as m,w as d,a as u,I as p,G as f,J as y,z as h,F as v,L as S,M as C,N as k,H as _,aJ as g,a1 as w,a0 as T,_ as b}from"./index-4bfb878d.js";import{g as x,d as I,a as M,c as R,u as j}from"./index-be7841d8.js";import{r as A}from"./formRules-eb36c657.js";import{u as D}from"./useVxeCrudSchemas-092b8963.js";import{u as E}from"./useXTable-309dffed.js";const{t:P}=e(),U=a(t.SYSTEM_SMS_CHANNEL_CODE),V=l({signature:[A],code:[A],apiKey:[A],status:[A]}),K=l({primaryKey:"id",primaryType:"id",primaryTitle:"渠道编号",action:!0,columns:[{title:"短信签名",field:"signature",isSearch:!0},{title:"渠道编码",field:"code",isSearch:!0,form:{component:"Select",componentProps:{options:U,multiple:!1,filterable:!0}}},{title:P("common.status"),field:"status",dictType:t.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:"短信 API 的账号",field:"apiKey"},{title:"短信 API 的密钥",field:"apiSecret"},{title:"短信发送回调 URL",field:"callbackUrl"},{title:P("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,search:{show:!0,itemRender:{name:"XDataTimePicker"}}}]}),{allSchemas:L}=D(K),N=s({name:"SmsChannel"}),F=b(s({...N,setup(a){const{t:t}=e(),l=i(),[s,{reload:b,deleteData:A}]=E({allSchemas:L,getListApi:x,deleteApi:I}),D=n(!1),P=n("edit"),U=n(""),K=n(!1),N=n(),F=n(),O=e=>{P.value=t("action."+e),U.value=e,D.value=!0};return(e,a)=>{const i=S,n=C,x=k,I=_,E=g,q=w,z=T,H=o("hasPermi");return c(),r(v,null,[m(I,null,{default:d((()=>[m(x,{onRegister:u(s)},{toolbar_buttons:d((()=>[p(m(i,{type:"primary",preIcon:"ep:zoom-in",title:u(t)("action.add"),onClick:a[0]||(a[0]=e=>{O("create")})},null,8,["title"]),[[H,["system:sms-channel:create"]]])])),actionbtns_default:d((({row:e})=>[p(m(n,{preIcon:"ep:edit",title:u(t)("action.edit"),onClick:a=>(async e=>{var a;O("update");const t=await M(e);null==(a=u(N))||a.setValues(t)})(e.id)},null,8,["title","onClick"]),[[H,["system:sms-channel:update"]]]),p(m(n,{preIcon:"ep:view",title:u(t)("action.detail"),onClick:a=>(async e=>{O("detail");const a=await M(e);F.value=a})(e.id)},null,8,["title","onClick"]),[[H,["system:sms-channel:query"]]]),p(m(n,{preIcon:"ep:delete",title:u(t)("action.del"),onClick:a=>u(A)(e.id)},null,8,["title","onClick"]),[[H,["system:sms-channel:delete"]]])])),_:1},8,["onRegister"])])),_:1}),m(z,{id:"smsChannel",modelValue:u(D),"onUpdate:modelValue":a[3]||(a[3]=e=>h(D)?D.value=e:null),title:u(P)},{footer:d((()=>[["create","update"].includes(u(U))?(c(),f(i,{key:0,type:"primary",title:u(t)("action.save"),loading:u(K),onClick:a[1]||(a[1]=e=>(async()=>{var e;const a=null==(e=u(N))?void 0:e.getElFormRef();a&&a.validate((async e=>{var a;if(e){K.value=!0;try{const e=null==(a=u(N))?void 0:a.formModel;"create"===U.value?(await R(e),l.success(t("common.createSuccess"))):(await j(e),l.success(t("common.updateSuccess"))),D.value=!1}finally{K.value=!1,await b()}}}))})())},null,8,["title","loading"])):y("",!0),m(i,{loading:u(K),title:u(t)("dialog.close"),onClick:a[2]||(a[2]=e=>D.value=!1)},null,8,["loading","title"])])),default:d((()=>[["create","update"].includes(u(U))?(c(),f(E,{key:0,schema:u(L).formSchema,rules:u(V),ref_key:"formRef",ref:N},null,8,["schema","rules"])):y("",!0),"detail"===u(U)?(c(),f(q,{key:1,schema:u(L).detailSchema,data:u(F)},null,8,["schema","data"])):y("",!0)])),_:1},8,["modelValue","title"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/system/sms/smsChannel/index.vue"]]);export{F as default};
