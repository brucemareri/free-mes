import{d as a,O as t,f as l,aU as e,g as n,a_ as r,aS as s,a as i,o,c as u,t as c,p,W as m,ba as d,_ as V}from"./index-4bfb878d.js";const f=V(a({__name:"CountTo",props:{startVal:t.number.def(0),endVal:t.number.def(2021),duration:t.number.def(3e3),autoplay:t.bool.def(!0),decimals:t.number.validate((a=>a>=0)).def(0),decimal:t.string.def("."),separator:t.string.def(","),prefix:t.string.def(""),suffix:t.string.def(""),useEasing:t.bool.def(!0),easingFn:{type:Function,default:(a,t,l,e)=>l*(1-Math.pow(2,-10*a/e))*1024/1023+t}},emits:["mounted","callback"],setup(a,{expose:t,emit:V}){const f=a,{getPrefixCls:g}=m(),F=g("count-to"),S=a=>{const{decimals:t,decimal:l,separator:e,suffix:n,prefix:r}=f;a=Number(a).toFixed(t);const s=(a+="").split(".");let i=s[0];const o=s.length>1?l+s[1]:"",u=/(\d+)(\d{3})/;if(e&&!d(e))for(;u.test(i);)i=i.replace(u,"$1"+e+"$2");return r+i+o+n},x=l({localStartVal:f.startVal,displayValue:S(f.startVal),printVal:null,paused:!1,localDuration:f.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),b=e(x,"displayValue");n((()=>{f.autoplay&&D(),V("mounted")}));const A=r((()=>f.startVal>f.endVal));s([()=>f.startVal,()=>f.endVal],(()=>{f.autoplay&&D()}));const D=()=>{const{startVal:a,duration:t}=f;x.localStartVal=a,x.startTime=null,x.localDuration=t,x.paused=!1,x.rAF=requestAnimationFrame(y)},T=()=>{cancelAnimationFrame(x.rAF)},_=()=>{x.startTime=null,x.localDuration=+x.remaining,x.localStartVal=+x.printVal,requestAnimationFrame(y)},y=a=>{const{useEasing:t,easingFn:l,endVal:e}=f;x.startTime||(x.startTime=a),x.timestamp=a;const n=a-x.startTime;x.remaining=x.localDuration-n,t?i(A)?x.printVal=x.localStartVal-l(n,0,x.localStartVal-e,x.localDuration):x.printVal=l(n,x.localStartVal,e-x.localStartVal,x.localDuration):i(A)?x.printVal=x.localStartVal-(x.localStartVal-e)*(n/x.localDuration):x.printVal=x.localStartVal+(e-x.localStartVal)*(n/x.localDuration),i(A)?x.printVal=x.printVal<e?e:x.printVal:x.printVal=x.printVal>e?e:x.printVal,x.displayValue=S(x.printVal),n<x.localDuration?x.rAF=requestAnimationFrame(y):V("callback")};return t({pauseResume:()=>{x.paused?(_(),x.paused=!1):(T(),x.paused=!0)},reset:()=>{x.startTime=null,cancelAnimationFrame(x.rAF),x.displayValue=S(f.startVal)},start:D,pause:T}),(a,t)=>(o(),u("span",{class:p(i(F))},c(i(b)),3))}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/components/CountTo/src/CountTo.vue"]]);export{f as _};
