import{f as e,r as a,d as l,e as o,g as t,o as i,c as s,k as n,w as p,a as r,j as d,F as u,n as c,G as m,X as b,t as h,ce as w,H as g,Z as y,cn as f,co as k,_ as C}from"./index-4bfb878d.js";import{c as v}from"./index-529a6cde.js";import{c as _}from"./index-6c8a85ac.js";const x=e([{type:"input",label:"工作站编号",prop:"workstationCode",placeholder:"请输入工作站编号"},{type:"input",label:"车间编号",prop:"workshopCode",placeholder:"请输入车间编号"},{type:"input",label:"工序编号",prop:"processCode",placeholder:"请输入工序编号"},{type:"input",label:"工人名称",prop:"userName",placeholder:"请输入工人名称"},{type:"input",label:"设备编号",prop:"machineryCode",placeholder:"请输入设备编号"},{type:"date",label:"开工时间",prop:"feedbackTime",placeholder:"请选择开始时间"},{type:"date",label:"报工时间",prop:"finishedTime",placeholder:"请选择结束时间"}]),T=[{label:"订单编号",prop:"workorderCode",width:"150"},{label:"工作站编号",prop:"workstationCode",width:"120"},{label:"任务单号",prop:"taskCode",width:"150"},{label:"产品名称",prop:"itemName"},{label:"车间编号",prop:"workshopCode"},{label:"工序编号",prop:"processCode",width:"150"},{label:"设备编号",prop:"equipmentCode"},{label:"人工工时",prop:"workHour",width:"150"},{label:"设备工时",prop:"equipmentHour",width:"170"},{label:"开工时间",prop:"feedbackTime",width:"170"},{label:"人工报工时间",prop:"workerFinishedTime",width:"170"},{label:"设备报工时间",prop:"equipmentFinishedTime",width:"170"},{label:"报工人",prop:"userName"}],j=e([{type:"warning",icon:"download",state:"download",label:"导出",permissions:[]}]),N={style:{"margin-bottom":"20px"}},S=d("div",{class:"cell-item"},"人工总工时",-1),q=d("div",{class:"cell-item"},"设备总工时",-1),z=C(l({__name:"index",setup(l){const C=e({workstationCode:"",workshopCode:"",processCode:"",userName:"",machineryCode:"",feedbackTime:"",finishedTime:""});let z=e({total:0,pageSize:10,pageSizes:[5,10,15,20],currentPage:1});const D=o(!1);let H=e([]),F=o(""),P=o("");const M=()=>{G()},W=async()=>{const e=await(async()=>await a.download({url:"/admin-api/mes/pro/hours/export"}))();w.excel(e,"工时管理.xls")},E=e=>{z=null==e?void 0:e.value,G()},G=()=>{const e={...C,pageNo:z.currentPage,pageSize:z.pageSize};D.value=!0,(async e=>await a.get({url:"/admin-api/mes/pro/hours/list",params:e}))(e).then((e=>{var a,l;const{total:o,list:t=[]}=e||{};F.value=null==(a=t[0])?void 0:a.totalWorkhours,P.value=null==(l=t[0])?void 0:l.equipmentWorkhours,z.total=o,console.log(e),H=t[0].list})).finally((()=>{D.value=!1}))};return t((()=>{G()})),(e,a)=>{const l=g,o=y,t=f,w=k;return i(),s(u,null,[n(l,null,{default:p((()=>[n(v,{"conditions-list":r(x),"search-model":C,onQueryData:M},null,8,["conditions-list","search-model"])])),_:1}),n(l,null,{default:p((()=>[d("div",N,[(i(!0),s(u,null,c(r(j),((e,a)=>(i(),m(o,{style:{"margin-bottom":"20px"},plain:"",type:e.type,key:a,icon:e.icon,disabled:e.disabled,onClick:a=>{"download"===e.state&&W()}},{default:p((()=>[b(h(e.label),1)])),_:2},1032,["type","icon","disabled","onClick"])))),128)),n(w,{class:"margin-top",column:2,border:""},{default:p((()=>[n(t,null,{label:p((()=>[S])),default:p((()=>[b(" "+h(r(F)),1)])),_:1}),n(t,null,{label:p((()=>[q])),default:p((()=>[b(" "+h(r(P)),1)])),_:1})])),_:1})]),n(_,{loading:D.value,columns:r(T),tableData:r(H),pagination:r(z),onPaginationChange:E},null,8,["loading","columns","tableData","pagination"])])),_:1})],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/prodMgmt/workHours/index.vue"]]);export{z as default};
