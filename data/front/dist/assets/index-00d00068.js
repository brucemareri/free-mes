import{r as e,q as a,f as t,D as s,d as i,K as l,e as o,g as n,C as r,o as d,c as u,k as c,w as m,a as p,I as y,F as v,n as f,G as w,X as g,t as _,J as k,z as x,L as h,aq as S,M as C,N as b,H as T,at as V,au as I,aJ as D,a1 as R,a0 as j,_ as M}from"./index-4bfb878d.js";import{r as U}from"./formRules-eb36c657.js";import{u as A}from"./useVxeCrudSchemas-092b8963.js";import{u as F}from"./useXTable-309dffed.js";const L=a=>e.get({url:"/admin-api/system/sensitive-word/page",params:a}),P=a=>e.get({url:"/admin-api/system/sensitive-word/get?id="+a}),W=a=>e.delete({url:"/admin-api/system/sensitive-word/delete?id="+a}),X=a=>e.download({url:"/admin-api/system/sensitive-word/export-excel",params:a}),{t:q}=a(),z=t({name:[U],tags:[U]}),E=t({primaryKey:"id",primaryType:"id",primaryTitle:"敏感词编号",action:!0,columns:[{title:"敏感词",field:"name",isSearch:!0},{title:"标签",field:"tag",isTable:!1,isForm:!1,isDetail:!1,isSearch:!0},{title:"标签",field:"tags",table:{slots:{default:"tags_default"}}},{title:q("common.status"),field:"status",dictType:s.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:"描述",field:"description",form:{component:"Input",componentProps:{type:"textarea",rows:4},colProps:{span:24}}},{title:q("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,search:{show:!0,itemRender:{name:"XDataTimePicker"}}}]}),{allSchemas:J}=A(E),K=i({name:"SensitiveWord"}),N=M(i({...K,setup(t){const{t:s}=a(),i=l(),[M,{reload:U,deleteData:A,exportList:q}]=F({allSchemas:J,getListApi:L,deleteApi:W,exportListApi:X}),E=o(!1),K=o(""),N=o(!1),O=o("edit"),G=o(),H=o(),Q=o(),B=async()=>{const a=await e.get({url:"/admin-api/system/sensitive-word/get-tags"});Q.value=a},Y=e=>{O.value=s("action."+e),K.value=e,N.value=!0},Z=async()=>{var a;const t=null==(a=p(G))?void 0:a.getElFormRef();t&&t.validate((async a=>{var t;if(a){E.value=!0;try{const a=null==(t=p(G))?void 0:t.formModel;"create"===K.value?(await(a=>e.post({url:"/admin-api/system/sensitive-word/create",data:a}))(a),i.success(s("common.createSuccess"))):(await(a=>e.put({url:"/admin-api/system/sensitive-word/update",data:a}))(a),i.success(s("common.updateSuccess"))),N.value=!1}finally{E.value=!1,await U()}}}))};return n((async()=>{await B()})),(e,a)=>{const t=h,i=S,l=C,o=b,n=T,U=V,F=I,L=D,W=R,X=j,B=r("hasPermi");return d(),u(v,null,[c(n,null,{default:m((()=>[c(o,{onRegister:p(M)},{toolbar_buttons:m((()=>[y(c(t,{type:"primary",preIcon:"ep:zoom-in",title:p(s)("action.add"),onClick:a[0]||(a[0]=e=>{Y("create")})},null,8,["title"]),[[B,["system:sensitive-word:create"]]]),y(c(t,{type:"warning",preIcon:"ep:download",title:p(s)("action.export"),onClick:a[1]||(a[1]=e=>p(q)("敏感词数据.xls"))},null,8,["title"]),[[B,["system:sensitive-word:export"]]])])),tags_default:m((({row:e})=>[(d(!0),u(v,null,f(e.tags,((e,a)=>(d(),w(i,{"disable-transitions":!0,key:a,index:a},{default:m((()=>[g(_(e),1)])),_:2},1032,["index"])))),128))])),actionbtns_default:m((({row:e})=>[y(c(l,{preIcon:"ep:edit",title:p(s)("action.edit"),onClick:a=>(async e=>{var a;Y("update");const t=await P(e);null==(a=p(G))||a.setValues(t)})(e.id)},null,8,["title","onClick"]),[[B,["system:sensitive-word:update"]]]),y(c(l,{preIcon:"ep:view",title:p(s)("action.detail"),onClick:a=>(async e=>{Y("detail");const a=await P(e);H.value=a})(e.id)},null,8,["title","onClick"]),[[B,["system:sensitive-word:update"]]]),y(c(l,{preIcon:"ep:delete",title:p(s)("action.del"),onClick:a=>p(A)(e.id)},null,8,["title","onClick"]),[[B,["system:sensitive-word:delete"]]])])),_:1},8,["onRegister"])])),_:1}),c(X,{modelValue:p(N),"onUpdate:modelValue":a[4]||(a[4]=e=>x(N)?N.value=e:null),title:p(O)},{footer:m((()=>[["create","update"].includes(p(K))?(d(),w(t,{key:0,type:"primary",title:p(s)("action.save"),loading:p(E),onClick:a[2]||(a[2]=e=>Z())},null,8,["title","loading"])):k("",!0),c(t,{loading:p(E),title:p(s)("dialog.close"),onClick:a[3]||(a[3]=e=>N.value=!1)},null,8,["loading","title"])])),default:m((()=>[["create","update"].includes(p(K))?(d(),w(L,{key:0,schema:p(J).formSchema,rules:p(z),ref_key:"formRef",ref:G},{tags:m((e=>[c(F,{modelValue:e.tags,"onUpdate:modelValue":a=>e.tags=a,multiple:"",placeholder:"请选择"},{default:m((()=>[(d(!0),u(v,null,f(p(Q),(e=>(d(),w(U,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1},8,["schema","rules"])):k("",!0),"detail"===p(K)?(d(),w(W,{key:1,schema:p(J).detailSchema,data:p(H)},{tags:m((({row:e})=>[(d(!0),u(v,null,f(e.tags,((e,a)=>(d(),w(i,{"disable-transitions":!0,key:a,index:a},{default:m((()=>[g(_(e),1)])),_:2},1032,["index"])))),128))])),_:1},8,["schema","data"])):k("",!0)])),_:1},8,["modelValue","title"])],64)}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/system/sensitiveWord/index.vue"]]);export{N as default};
