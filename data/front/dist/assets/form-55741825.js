import{q as e,f as a,D as t,d as s,K as l,e as o,a6 as i,o as r,G as u,w as c,a as m,J as n,k as d,z as f,a1 as p,L as v,a0 as y,_}from"./index-4bfb878d.js";import{g as S,c as h,u as g}from"./index-2af8984f.js";import{r as w}from"./formRules-eb36c657.js";import{u as T}from"./useVxeCrudSchemas-092b8963.js";const{t:k}=e(),b=a({name:[w],code:[w],sort:[w]}),j=a({primaryKey:"id",primaryType:"id",primaryTitle:"岗位编号",action:!0,columns:[{title:"岗位名称",field:"name",isSearch:!0},{title:"岗位编码",field:"code",isSearch:!0},{title:"岗位顺序",field:"sort",form:{component:"InputNumber"}},{title:k("common.status"),field:"status",dictType:t.COMMON_STATUS,dictClass:"number",isSearch:!0},{title:"备注",field:"remark",isTable:!1},{title:k("common.createTime"),field:"createTime",formatter:"formatDate",isForm:!1,table:{width:180}}]}),{allSchemas:x}=T(j),M=_(s({__name:"form",emits:["success"],setup(a,{expose:t,emit:s}){const{t:_}=e(),w=l(),T=o(!1),k=o(""),j=o(!1),M=o(""),C=o(!1),V=o(),O=o();t({openModal:async(e,a)=>{var t;if(T.value=!0,j.value=!0,k.value=_("action."+e),M.value=e,a){const s=await S(a);"update"===e?null==(t=m(V))||t.setValues(s):"detail"===e&&(O.value=s)}j.value=!1}});return(e,a)=>{const t=i("Form",!0),l=p,o=v,S=y;return r(),u(S,{title:m(k),loading:m(j),modelValue:m(T),"onUpdate:modelValue":a[2]||(a[2]=e=>f(T)?T.value=e:null)},{footer:c((()=>[["create","update"].includes(m(M))?(r(),u(o,{key:0,type:"primary",title:m(_)("action.save"),loading:m(C),onClick:a[0]||(a[0]=e=>(async()=>{var e,a;const t=null==(e=m(V))?void 0:e.getElFormRef();if(!t)return;if(await t.validate()){C.value=!0;try{const e=null==(a=m(V))?void 0:a.formModel;"create"===M.value?(await h(e),w.success(_("common.createSuccess"))):(await g(e),w.success(_("common.updateSuccess"))),T.value=!1,s("success")}finally{C.value=!1}}})())},null,8,["title","loading"])):n("",!0),d(o,{loading:m(C),title:m(_)("dialog.close"),onClick:a[1]||(a[1]=e=>T.value=!1)},null,8,["loading","title"])])),default:c((()=>[["create","update"].includes(m(M))?(r(),u(t,{key:0,ref_key:"formRef",ref:V,schema:m(x).formSchema,rules:m(b)},null,8,["schema","rules"])):n("",!0),"detail"===m(M)?(r(),u(l,{key:1,schema:m(x).detailSchema,data:m(O)},null,8,["schema","data"])):n("",!0)])),_:1},8,["title","loading","modelValue"])}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/system/post/form.vue"]]),C=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{M as P,x as a,C as f};
