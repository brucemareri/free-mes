import{d as e,e as a,f as l,o as d,G as o,w as t,k as r,J as u,c as p,F as i,n as m,aH as s,aa as n,ab as c,v as f,aO as h,E as b,cg as V,at as y,au as _,cb as F,ae as g,_ as D}from"./index-4bfb878d.js";import{g as w}from"./index-f736ac6b.js";const v=D(e({__name:"productForm",props:{typeStateList:{type:Array,default:()=>[]},measureOptions:{type:Array,default:()=>[]},productFormData:{type:Object,default:()=>{}},treeMaterialForm:{type:Object,default:()=>{}},dialogState:{type:String,default:()=>""}},setup(e,{expose:D}){const v=e,S=a({value:"id",label:"machineryTypeName",children:"children",checkStrictly:!0}),k=a(),C=l({machineryCode:[{required:!0,message:"设备编码不能为空",trigger:"blur"}],status:[{required:!0,message:"设备状态不能为空",trigger:"blur"}],machineryName:[{required:!0,message:"设备名称不能为空",trigger:"blur"}],machineryTypeId:[{required:!0,message:"设备分类不能为空",trigger:"blur"}],workshopId:[{required:!0,message:"所属车间不能为空",trigger:"blur"}]}),U=e=>{var a,l;v.productFormData.workshopCode=null==(a=v.measureOptions.find((a=>a.id==e)))?void 0:a.workshopCode,v.productFormData.workshopName=null==(l=v.measureOptions.find((a=>a.id==e)))?void 0:l.workshopName};return D({handleSubmitForm:async()=>{if(null==k?void 0:k.value)return await new Promise((e=>{k.value.validate((a=>{e(a)}))}))},handleCancel:()=>{k.value&&k.value.resetFields()}}),(a,l)=>{const D=n,N=c,M=f,I=h,x=b,O=V,T=y,j=_,q=F,Y=g;return d(),o(Y,{ref_key:"refProduct",ref:k,model:e.productFormData,rules:C,"label-width":"120px"},{default:t((()=>[r(x,null,{default:t((()=>[r(M,{span:11},{default:t((()=>[r(N,{label:"设备编码",prop:"machineryCode"},{default:t((()=>[r(D,{modelValue:e.productFormData.machineryCode,"onUpdate:modelValue":l[0]||(l[0]=a=>e.productFormData.machineryCode=a),placeholder:"请输入设备编码",clearables:"",disabled:"View"===e.dialogState},null,8,["modelValue","disabled"])])),_:1})])),_:1}),r(M,{span:11},{default:t((()=>["View"!==e.dialogState?(d(),o(N,{key:0,"label-width":"80",label:"自动生成"},{default:t((()=>[r(I,{modelValue:e.productFormData.autoGenFlag,"onUpdate:modelValue":l[1]||(l[1]=a=>e.productFormData.autoGenFlag=a),"active-color":"#13ce66",onChange:l[2]||(l[2]=a=>(e=>{if(!e)return;v.productFormData.machineryCode="",w("MACHINERY_CODE").then((e=>{s((()=>{v.productFormData.machineryCode=e}))}))})(e.productFormData.autoGenFlag))},null,8,["modelValue"])])),_:1})):u("",!0)])),_:1}),r(M,{span:11},{default:t((()=>[r(N,{label:"设备名称",prop:"machineryName"},{default:t((()=>[r(D,{modelValue:e.productFormData.machineryName,"onUpdate:modelValue":l[3]||(l[3]=a=>e.productFormData.machineryName=a),placeholder:"请输入设备名称",disabled:"View"===e.dialogState},null,8,["modelValue","disabled"])])),_:1})])),_:1}),r(M,{span:11},{default:t((()=>[r(N,{label:"品牌名称",prop:"machineryBrand"},{default:t((()=>[r(D,{modelValue:e.productFormData.machineryBrand,"onUpdate:modelValue":l[4]||(l[4]=a=>e.productFormData.machineryBrand=a),disabled:"View"===e.dialogState,placeholder:"请输入品牌"},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),r(x,null,{default:t((()=>[r(M,{span:11},{default:t((()=>[r(N,{label:"设备分类",prop:"machineryTypeId"},{default:t((()=>[r(O,{disabled:"View"===e.dialogState,options:e.treeMaterialForm.treeData,"show-all-levels":!1,props:S.value,modelValue:e.productFormData.machineryTypeId,"onUpdate:modelValue":l[5]||(l[5]=a=>e.productFormData.machineryTypeId=a)},null,8,["disabled","options","props","modelValue"])])),_:1})])),_:1}),r(M,{span:11},{default:t((()=>[r(N,{label:"规格型号",prop:"machinerySpec"},{default:t((()=>[r(D,{modelValue:e.productFormData.machinerySpec,"onUpdate:modelValue":l[6]||(l[6]=a=>e.productFormData.machinerySpec=a),disabled:"View"===e.dialogState,placeholder:"请输入规格型号"},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),r(x,null,{default:t((()=>[r(M,{span:11},{default:t((()=>[r(N,{label:"所属车间",prop:"workshopId"},{default:t((()=>[r(j,{onChange:U,modelValue:e.productFormData.workshopId,"onUpdate:modelValue":l[7]||(l[7]=a=>e.productFormData.workshopId=a),disabled:"View"===e.dialogState},{default:t((()=>[(d(!0),p(i,null,m(e.measureOptions,(e=>(d(),o(T,{key:e.id,label:e.workshopName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),r(M,{span:11},{default:t((()=>[r(N,{label:"设备状态",prop:"status"},{default:t((()=>[r(j,{onChange:U,modelValue:e.productFormData.status,"onUpdate:modelValue":l[8]||(l[8]=a=>e.productFormData.status=a),disabled:"View"===e.dialogState},{default:t((()=>[(d(!0),p(i,null,m(e.typeStateList,(e=>(d(),o(T,{key:e.id,label:e.statusName,value:e.statusName},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),r(M,{span:11},{default:t((()=>[r(N,{label:"位置",prop:"location"},{default:t((()=>[r(D,{modelValue:e.productFormData.location,"onUpdate:modelValue":l[9]||(l[9]=a=>e.productFormData.location=a),disabled:"View"===e.dialogState,placeholder:"请输入位置"},null,8,["modelValue","disabled"])])),_:1})])),_:1}),r(M,{span:11},{default:t((()=>[r(N,{label:"产能",prop:"capacity"},{default:t((()=>[r(D,{modelValue:e.productFormData.capacity,"onUpdate:modelValue":l[10]||(l[10]=a=>e.productFormData.capacity=a),disabled:"View"===e.dialogState,placeholder:"请输产能"},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),r(x,null,{default:t((()=>[r(M,{span:11},{default:t((()=>[r(N,{label:"型号",prop:"pclModel"},{default:t((()=>[r(D,{modelValue:e.productFormData.pclModel,"onUpdate:modelValue":l[11]||(l[11]=a=>e.productFormData.pclModel=a),disabled:"View"===e.dialogState,placeholder:"请输型号"},null,8,["modelValue","disabled"])])),_:1})])),_:1}),r(M,{span:11},{default:t((()=>[r(N,{label:"购买日期",prop:"purchasingTime"},{default:t((()=>[r(q,{placeholder:"请输入购买日期",type:"date","value-format":"YYYY-MM-DD",modelValue:e.productFormData.purchasingTime,"onUpdate:modelValue":l[12]||(l[12]=a=>e.productFormData.purchasingTime=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(x,null,{default:t((()=>[r(M,{span:22},{default:t((()=>[r(N,{label:"备注"},{default:t((()=>[r(D,{disabled:"View"===e.dialogState,modelValue:e.productFormData.remark,"onUpdate:modelValue":l[13]||(l[13]=a=>e.productFormData.remark=a),type:"textarea",placeholder:"请输入内容"},null,8,["disabled","modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])}}}),[["__file","/Users/alex/Downloads/万界星空/产品研发/MES框架/dev/xiejinrun/new_open_mes_front/src/views/facilityManage/ledger/components/productForm.vue"]]);export{v as default};
